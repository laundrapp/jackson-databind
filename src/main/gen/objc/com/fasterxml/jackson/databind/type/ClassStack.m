//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Salton/Documents/Projects/jackson-databind/src/main/java/com/fasterxml/jackson/databind/type/ClassStack.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/fasterxml/jackson/databind/JavaType.h"
#include "com/fasterxml/jackson/databind/type/ClassStack.h"
#include "com/fasterxml/jackson/databind/type/ResolvedRecursiveType.h"
#include "java/lang/StringBuilder.h"
#include "java/util/ArrayList.h"

@interface ComFasterxmlJacksonDatabindTypeClassStack () {
 @public
  JavaUtilArrayList *_selfRefs_;
}

- (instancetype __nonnull)initWithComFasterxmlJacksonDatabindTypeClassStack:(ComFasterxmlJacksonDatabindTypeClassStack *)parent
                                                               withIOSClass:(IOSClass *)curr;

@end

J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindTypeClassStack, _selfRefs_, JavaUtilArrayList *)

__attribute__((unused)) static void ComFasterxmlJacksonDatabindTypeClassStack_initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_(ComFasterxmlJacksonDatabindTypeClassStack *self, ComFasterxmlJacksonDatabindTypeClassStack *parent, IOSClass *curr);

__attribute__((unused)) static ComFasterxmlJacksonDatabindTypeClassStack *new_ComFasterxmlJacksonDatabindTypeClassStack_initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_(ComFasterxmlJacksonDatabindTypeClassStack *parent, IOSClass *curr) NS_RETURNS_RETAINED;

__attribute__((unused)) static ComFasterxmlJacksonDatabindTypeClassStack *create_ComFasterxmlJacksonDatabindTypeClassStack_initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_(ComFasterxmlJacksonDatabindTypeClassStack *parent, IOSClass *curr);

@implementation ComFasterxmlJacksonDatabindTypeClassStack

- (instancetype __nonnull)initWithIOSClass:(IOSClass *)rootType {
  ComFasterxmlJacksonDatabindTypeClassStack_initWithIOSClass_(self, rootType);
  return self;
}

- (instancetype __nonnull)initWithComFasterxmlJacksonDatabindTypeClassStack:(ComFasterxmlJacksonDatabindTypeClassStack *)parent
                                                               withIOSClass:(IOSClass *)curr {
  ComFasterxmlJacksonDatabindTypeClassStack_initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_(self, parent, curr);
  return self;
}

- (ComFasterxmlJacksonDatabindTypeClassStack *)childWithIOSClass:(IOSClass *)cls {
  return create_ComFasterxmlJacksonDatabindTypeClassStack_initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_(self, cls);
}

- (void)addSelfReferenceWithComFasterxmlJacksonDatabindTypeResolvedRecursiveType:(ComFasterxmlJacksonDatabindTypeResolvedRecursiveType *)ref {
  if (_selfRefs_ == nil) {
    JreStrongAssignAndConsume(&_selfRefs_, new_JavaUtilArrayList_init());
  }
  [_selfRefs_ addWithId:ref];
}

- (void)resolveSelfReferencesWithComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)resolved {
  if (_selfRefs_ != nil) {
    for (ComFasterxmlJacksonDatabindTypeResolvedRecursiveType * __strong ref in _selfRefs_) {
      [((ComFasterxmlJacksonDatabindTypeResolvedRecursiveType *) nil_chk(ref)) setReferenceWithComFasterxmlJacksonDatabindJavaType:resolved];
    }
  }
}

- (ComFasterxmlJacksonDatabindTypeClassStack *)findWithIOSClass:(IOSClass *)cls {
  if (_current_ == cls) return self;
  for (ComFasterxmlJacksonDatabindTypeClassStack *curr = _parent_; curr != nil; curr = curr->_parent_) {
    if (curr->_current_ == cls) {
      return curr;
    }
  }
  return nil;
}

- (NSString *)description {
  JavaLangStringBuilder *sb = create_JavaLangStringBuilder_init();
  [((JavaLangStringBuilder *) nil_chk([((JavaLangStringBuilder *) nil_chk([sb appendWithNSString:@"[ClassStack (self-refs: "])) appendWithNSString:(_selfRefs_ == nil) ? @"0" : NSString_java_valueOfInt_([((JavaUtilArrayList *) nil_chk(_selfRefs_)) size])])) appendWithChar:')'];
  for (ComFasterxmlJacksonDatabindTypeClassStack *curr = self; curr != nil; curr = curr->_parent_) {
    [((JavaLangStringBuilder *) nil_chk([sb appendWithChar:' '])) appendWithNSString:[((IOSClass *) nil_chk(curr->_current_)) getName]];
  }
  [sb appendWithChar:']'];
  return [sb description];
}

- (void)dealloc {
  RELEASE_(_parent_);
  RELEASE_(_current_);
  RELEASE_(_selfRefs_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, 1, -1, -1 },
    { NULL, NULL, 0x2, -1, 2, -1, 3, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindTypeClassStack;", 0x1, 4, 0, -1, 5, -1, -1 },
    { NULL, "V", 0x1, 6, 7, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 8, 9, -1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindTypeClassStack;", 0x1, 10, 0, -1, 5, -1, -1 },
    { NULL, "LNSString;", 0x1, 11, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithIOSClass:);
  methods[1].selector = @selector(initWithComFasterxmlJacksonDatabindTypeClassStack:withIOSClass:);
  methods[2].selector = @selector(childWithIOSClass:);
  methods[3].selector = @selector(addSelfReferenceWithComFasterxmlJacksonDatabindTypeResolvedRecursiveType:);
  methods[4].selector = @selector(resolveSelfReferencesWithComFasterxmlJacksonDatabindJavaType:);
  methods[5].selector = @selector(findWithIOSClass:);
  methods[6].selector = @selector(description);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "_parent_", "LComFasterxmlJacksonDatabindTypeClassStack;", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "_current_", "LIOSClass;", .constantValue.asLong = 0, 0x14, -1, -1, 12, -1 },
    { "_selfRefs_", "LJavaUtilArrayList;", .constantValue.asLong = 0, 0x2, -1, -1, 13, -1 },
  };
  static const void *ptrTable[] = { "LIOSClass;", "(Ljava/lang/Class<*>;)V", "LComFasterxmlJacksonDatabindTypeClassStack;LIOSClass;", "(Lcom/fasterxml/jackson/databind/type/ClassStack;Ljava/lang/Class<*>;)V", "child", "(Ljava/lang/Class<*>;)Lcom/fasterxml/jackson/databind/type/ClassStack;", "addSelfReference", "LComFasterxmlJacksonDatabindTypeResolvedRecursiveType;", "resolveSelfReferences", "LComFasterxmlJacksonDatabindJavaType;", "find", "toString", "Ljava/lang/Class<*>;", "Ljava/util/ArrayList<Lcom/fasterxml/jackson/databind/type/ResolvedRecursiveType;>;" };
  static const J2ObjcClassInfo _ComFasterxmlJacksonDatabindTypeClassStack = { "ClassStack", "com.fasterxml.jackson.databind.type", ptrTable, methods, fields, 7, 0x11, 7, 3, -1, -1, -1, -1, -1 };
  return &_ComFasterxmlJacksonDatabindTypeClassStack;
}

@end

void ComFasterxmlJacksonDatabindTypeClassStack_initWithIOSClass_(ComFasterxmlJacksonDatabindTypeClassStack *self, IOSClass *rootType) {
  ComFasterxmlJacksonDatabindTypeClassStack_initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_(self, nil, rootType);
}

ComFasterxmlJacksonDatabindTypeClassStack *new_ComFasterxmlJacksonDatabindTypeClassStack_initWithIOSClass_(IOSClass *rootType) {
  J2OBJC_NEW_IMPL(ComFasterxmlJacksonDatabindTypeClassStack, initWithIOSClass_, rootType)
}

ComFasterxmlJacksonDatabindTypeClassStack *create_ComFasterxmlJacksonDatabindTypeClassStack_initWithIOSClass_(IOSClass *rootType) {
  J2OBJC_CREATE_IMPL(ComFasterxmlJacksonDatabindTypeClassStack, initWithIOSClass_, rootType)
}

void ComFasterxmlJacksonDatabindTypeClassStack_initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_(ComFasterxmlJacksonDatabindTypeClassStack *self, ComFasterxmlJacksonDatabindTypeClassStack *parent, IOSClass *curr) {
  NSObject_init(self);
  JreStrongAssign(&self->_parent_, parent);
  JreStrongAssign(&self->_current_, curr);
}

ComFasterxmlJacksonDatabindTypeClassStack *new_ComFasterxmlJacksonDatabindTypeClassStack_initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_(ComFasterxmlJacksonDatabindTypeClassStack *parent, IOSClass *curr) {
  J2OBJC_NEW_IMPL(ComFasterxmlJacksonDatabindTypeClassStack, initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_, parent, curr)
}

ComFasterxmlJacksonDatabindTypeClassStack *create_ComFasterxmlJacksonDatabindTypeClassStack_initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_(ComFasterxmlJacksonDatabindTypeClassStack *parent, IOSClass *curr) {
  J2OBJC_CREATE_IMPL(ComFasterxmlJacksonDatabindTypeClassStack, initWithComFasterxmlJacksonDatabindTypeClassStack_withIOSClass_, parent, curr)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComFasterxmlJacksonDatabindTypeClassStack)
