//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Salton/Documents/Projects/jackson-databind/src/main/java/com/fasterxml/jackson/databind/deser/impl/ExternalTypeHandler.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "com/fasterxml/jackson/core/JsonParser.h"
#include "com/fasterxml/jackson/core/JsonToken.h"
#include "com/fasterxml/jackson/databind/DeserializationContext.h"
#include "com/fasterxml/jackson/databind/DeserializationFeature.h"
#include "com/fasterxml/jackson/databind/JavaType.h"
#include "com/fasterxml/jackson/databind/deser/SettableBeanProperty.h"
#include "com/fasterxml/jackson/databind/deser/impl/BeanPropertyMap.h"
#include "com/fasterxml/jackson/databind/deser/impl/ExternalTypeHandler.h"
#include "com/fasterxml/jackson/databind/deser/impl/PropertyBasedCreator.h"
#include "com/fasterxml/jackson/databind/deser/impl/PropertyValueBuffer.h"
#include "com/fasterxml/jackson/databind/jsontype/TypeDeserializer.h"
#include "com/fasterxml/jackson/databind/jsontype/TypeIdResolver.h"
#include "com/fasterxml/jackson/databind/util/TokenBuffer.h"
#include "java/lang/Integer.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"
#include "java/util/Iterator.h"
#include "java/util/LinkedList.h"
#include "java/util/List.h"
#include "java/util/Map.h"

@interface ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler () {
 @public
  ComFasterxmlJacksonDatabindJavaType *_beanType_;
  IOSObjectArray *_properties_;
  /*!
   @brief Mapping from external property ids to one or more indexes;
  in most cases single index as <code>Integer</code>, but
  occasionally same name maps to multiple ones: if so, 
 <code>List&lt;Integer&gt;</code>.
   */
  id<JavaUtilMap> _nameToPropertyIndex_;
  IOSObjectArray *_typeIds_;
  IOSObjectArray *_tokens_;
}

- (jboolean)_handleTypePropertyValueWithComFasterxmlJacksonCoreJsonParser:(ComFasterxmlJacksonCoreJsonParser *)p
                    withComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                             withNSString:(NSString *)propName
                                                                   withId:(id)bean
                                                             withNSString:(NSString *)typeId
                                                                  withInt:(jint)index;

@end

J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler, _beanType_, ComFasterxmlJacksonDatabindJavaType *)
J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler, _properties_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler, _nameToPropertyIndex_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler, _typeIds_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler, _tokens_, IOSObjectArray *)

__attribute__((unused)) static jboolean ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__handleTypePropertyValueWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withNSString_withId_withNSString_withInt_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *self, ComFasterxmlJacksonCoreJsonParser *p, ComFasterxmlJacksonDatabindDeserializationContext *ctxt, NSString *propName, id bean, NSString *typeId, jint index);

__attribute__((unused)) static id ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__deserializeWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withInt_withNSString_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *self, ComFasterxmlJacksonCoreJsonParser *p, ComFasterxmlJacksonDatabindDeserializationContext *ctxt, jint index, NSString *typeId);

__attribute__((unused)) static void ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__deserializeAndSetWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withId_withInt_withNSString_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *self, ComFasterxmlJacksonCoreJsonParser *p, ComFasterxmlJacksonDatabindDeserializationContext *ctxt, id bean, jint index, NSString *typeId);

@interface ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder () {
 @public
  ComFasterxmlJacksonDatabindJavaType *_beanType_;
  id<JavaUtilList> _properties_;
  id<JavaUtilMap> _nameToPropertyIndex_;
}

- (void)_addPropertyIndexWithNSString:(NSString *)name
                  withJavaLangInteger:(JavaLangInteger *)index;

@end

J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder, _beanType_, ComFasterxmlJacksonDatabindJavaType *)
J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder, _properties_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder, _nameToPropertyIndex_, id<JavaUtilMap>)

__attribute__((unused)) static void ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder__addPropertyIndexWithNSString_withJavaLangInteger_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder *self, NSString *name, JavaLangInteger *index);

@interface ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty : NSObject {
 @public
  ComFasterxmlJacksonDatabindDeserSettableBeanProperty *_property_;
  ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *_typeDeserializer_;
  NSString *_typePropertyName_;
  /*!
   @since 2.8
   */
  ComFasterxmlJacksonDatabindDeserSettableBeanProperty *_typeProperty_;
}

- (instancetype __nonnull)initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:(ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)property
                               withComFasterxmlJacksonDatabindJsontypeTypeDeserializer:(ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *)typeDeser;

/*!
 @since 2.8
 */
- (void)linkTypePropertyWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:(ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)p;

- (jboolean)hasTypePropertyNameWithNSString:(NSString *)n;

- (jboolean)hasDefaultType;

/*!
 @brief Specialized called when we need to expose type id of `defaultImpl` when
  serializing: we may need to expose it for assignment to a property, or
  it may be requested as visible for some other reason.
 */
- (NSString *)getDefaultTypeId;

- (NSString *)getTypePropertyName;

- (ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)getProperty;

/*!
 @since 2.8
 */
- (ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)getTypeProperty;

@end

J2OBJC_EMPTY_STATIC_INIT(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty)

J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty, _property_, ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)
J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty, _typeDeserializer_, ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *)
J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty, _typePropertyName_, NSString *)
J2OBJC_FIELD_SETTER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty, _typeProperty_, ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)

__attribute__((unused)) static void ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty_initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty_withComFasterxmlJacksonDatabindJsontypeTypeDeserializer_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *self, ComFasterxmlJacksonDatabindDeserSettableBeanProperty *property, ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *typeDeser);

__attribute__((unused)) static ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *new_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty_initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty_withComFasterxmlJacksonDatabindJsontypeTypeDeserializer_(ComFasterxmlJacksonDatabindDeserSettableBeanProperty *property, ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *typeDeser) NS_RETURNS_RETAINED;

__attribute__((unused)) static ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *create_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty_initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty_withComFasterxmlJacksonDatabindJsontypeTypeDeserializer_(ComFasterxmlJacksonDatabindDeserSettableBeanProperty *property, ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *typeDeser);

J2OBJC_TYPE_LITERAL_HEADER(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty)

@implementation ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler

- (instancetype __nonnull)initWithComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)beanType
withComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedPropertyArray:(IOSObjectArray *)properties
                                                      withJavaUtilMap:(id<JavaUtilMap>)nameToPropertyIndex
                                                    withNSStringArray:(IOSObjectArray *)typeIds
                  withComFasterxmlJacksonDatabindUtilTokenBufferArray:(IOSObjectArray *)tokens {
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initWithComFasterxmlJacksonDatabindJavaType_withComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedPropertyArray_withJavaUtilMap_withNSStringArray_withComFasterxmlJacksonDatabindUtilTokenBufferArray_(self, beanType, properties, nameToPropertyIndex, typeIds, tokens);
  return self;
}

- (instancetype __nonnull)initWithComFasterxmlJacksonDatabindDeserImplExternalTypeHandler:(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *)h {
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initWithComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_(self, h);
  return self;
}

+ (ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder *)builderWithComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)beanType {
  return ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_builderWithComFasterxmlJacksonDatabindJavaType_(beanType);
}

- (ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *)start {
  return create_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initWithComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_(self);
}

- (jboolean)handleTypePropertyValueWithComFasterxmlJacksonCoreJsonParser:(ComFasterxmlJacksonCoreJsonParser *)p
                   withComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                            withNSString:(NSString *)propName
                                                                  withId:(id)bean {
  id ob = [((id<JavaUtilMap>) nil_chk(_nameToPropertyIndex_)) getWithId:propName];
  if (ob == nil) {
    return false;
  }
  NSString *typeId = [((ComFasterxmlJacksonCoreJsonParser *) nil_chk(p)) getText];
  if ([JavaUtilList_class_() isInstance:ob]) {
    jboolean result = false;
    for (JavaLangInteger * __strong index in (id<JavaUtilList>) cast_check(ob, JavaUtilList_class_())) {
      if (ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__handleTypePropertyValueWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withNSString_withId_withNSString_withInt_(self, p, ctxt, propName, bean, typeId, [((JavaLangInteger *) nil_chk(index)) intValue])) {
        result = true;
      }
    }
    return result;
  }
  return ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__handleTypePropertyValueWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withNSString_withId_withNSString_withInt_(self, p, ctxt, propName, bean, typeId, [((JavaLangInteger *) cast_chk(ob, [JavaLangInteger class])) intValue]);
}

- (jboolean)_handleTypePropertyValueWithComFasterxmlJacksonCoreJsonParser:(ComFasterxmlJacksonCoreJsonParser *)p
                    withComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                             withNSString:(NSString *)propName
                                                                   withId:(id)bean
                                                             withNSString:(NSString *)typeId
                                                                  withInt:(jint)index {
  return ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__handleTypePropertyValueWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withNSString_withId_withNSString_withInt_(self, p, ctxt, propName, bean, typeId, index);
}

- (jboolean)handlePropertyValueWithComFasterxmlJacksonCoreJsonParser:(ComFasterxmlJacksonCoreJsonParser *)p
               withComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                        withNSString:(NSString *)propName
                                                              withId:(id)bean {
  id ob = [((id<JavaUtilMap>) nil_chk(_nameToPropertyIndex_)) getWithId:propName];
  if (ob == nil) {
    return false;
  }
  if ([JavaUtilList_class_() isInstance:ob]) {
    id<JavaUtilIterator> it = [((id<JavaUtilList>) cast_check(ob, JavaUtilList_class_())) iterator];
    JavaLangInteger *index = [((id<JavaUtilIterator>) nil_chk(it)) next];
    ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *prop = IOSObjectArray_Get(nil_chk(_properties_), [((JavaLangInteger *) nil_chk(index)) intValue]);
    if ([((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(prop)) hasTypePropertyNameWithNSString:propName]) {
      NSString *typeId = [((ComFasterxmlJacksonCoreJsonParser *) nil_chk(p)) getText];
      [p skipChildren];
      IOSObjectArray_Set(nil_chk(_typeIds_), [index intValue], typeId);
      while ([it hasNext]) {
        IOSObjectArray_Set(_typeIds_, [((JavaLangInteger *) nil_chk([it next])) intValue], typeId);
      }
    }
    else {
      ComFasterxmlJacksonDatabindUtilTokenBuffer *tokens = create_ComFasterxmlJacksonDatabindUtilTokenBuffer_initWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_(p, ctxt);
      [tokens copyCurrentStructureWithComFasterxmlJacksonCoreJsonParser:p];
      IOSObjectArray_Set(nil_chk(_tokens_), [index intValue], tokens);
      while ([it hasNext]) {
        IOSObjectArray_Set(_tokens_, [((JavaLangInteger *) nil_chk([it next])) intValue], tokens);
      }
    }
    return true;
  }
  jint index = [((JavaLangInteger *) cast_chk(ob, [JavaLangInteger class])) intValue];
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *prop = IOSObjectArray_Get(nil_chk(_properties_), index);
  jboolean canDeserialize;
  if ([((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(prop)) hasTypePropertyNameWithNSString:propName]) {
    IOSObjectArray_Set(nil_chk(_typeIds_), index, [((ComFasterxmlJacksonCoreJsonParser *) nil_chk(p)) getText]);
    [p skipChildren];
    canDeserialize = ((bean != nil) && (IOSObjectArray_Get(nil_chk(_tokens_), index) != nil));
  }
  else {
    ComFasterxmlJacksonDatabindUtilTokenBuffer *tokens = create_ComFasterxmlJacksonDatabindUtilTokenBuffer_initWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_(p, ctxt);
    [tokens copyCurrentStructureWithComFasterxmlJacksonCoreJsonParser:p];
    IOSObjectArray_Set(nil_chk(_tokens_), index, tokens);
    canDeserialize = ((bean != nil) && (IOSObjectArray_Get(nil_chk(_typeIds_), index) != nil));
  }
  if (canDeserialize) {
    NSString *typeId = IOSObjectArray_Get(nil_chk(_typeIds_), index);
    IOSObjectArray_Set(_typeIds_, index, nil);
    ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__deserializeAndSetWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withId_withInt_withNSString_(self, p, ctxt, bean, index, typeId);
    IOSObjectArray_Set(nil_chk(_tokens_), index, nil);
  }
  return true;
}

- (id)completeWithComFasterxmlJacksonCoreJsonParser:(ComFasterxmlJacksonCoreJsonParser *)p
withComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                             withId:(id)bean {
  for (jint i = 0, len = ((IOSObjectArray *) nil_chk(_properties_))->size_; i < len; ++i) {
    NSString *typeId = IOSObjectArray_Get(nil_chk(_typeIds_), i);
    if (typeId == nil) {
      ComFasterxmlJacksonDatabindUtilTokenBuffer *tokens = IOSObjectArray_Get(nil_chk(_tokens_), i);
      if (tokens == nil) {
        continue;
      }
      ComFasterxmlJacksonCoreJsonToken *t = [tokens firstToken];
      if ([((ComFasterxmlJacksonCoreJsonToken *) nil_chk(t)) isScalarValue]) {
        ComFasterxmlJacksonCoreJsonParser *buffered = [tokens asParserWithComFasterxmlJacksonCoreJsonParser:p];
        [((ComFasterxmlJacksonCoreJsonParser *) nil_chk(buffered)) nextToken];
        ComFasterxmlJacksonDatabindDeserSettableBeanProperty *extProp = [((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(_properties_, i))) getProperty];
        id result = ComFasterxmlJacksonDatabindJsontypeTypeDeserializer_deserializeIfNaturalWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withComFasterxmlJacksonDatabindJavaType_(buffered, ctxt, [((ComFasterxmlJacksonDatabindDeserSettableBeanProperty *) nil_chk(extProp)) getType]);
        if (result != nil) {
          [extProp setWithId:bean withId:result];
          continue;
        }
        if (![((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(_properties_, i))) hasDefaultType]) {
          [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) reportInputMismatchWithIOSClass:[nil_chk(bean) java_getClass] withNSString:@"Missing external type id property '%s'" withNSObjectArray:[IOSObjectArray arrayWithObjects:(id[]){ [((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(_properties_, i))) getTypePropertyName] } count:1 type:NSObject_class_()]];
        }
        else {
          typeId = [((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(_properties_, i))) getDefaultTypeId];
        }
      }
    }
    else if (IOSObjectArray_Get(nil_chk(_tokens_), i) == nil) {
      ComFasterxmlJacksonDatabindDeserSettableBeanProperty *prop = [((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(_properties_, i))) getProperty];
      if ([((ComFasterxmlJacksonDatabindDeserSettableBeanProperty *) nil_chk(prop)) isRequired] || [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) isEnabledWithComFasterxmlJacksonDatabindDeserializationFeature:JreLoadEnum(ComFasterxmlJacksonDatabindDeserializationFeature, FAIL_ON_MISSING_EXTERNAL_TYPE_ID_PROPERTY)]) {
        [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) reportInputMismatchWithIOSClass:[nil_chk(bean) java_getClass] withNSString:@"Missing property '%s' for external type id '%s'" withNSObjectArray:[IOSObjectArray arrayWithObjects:(id[]){ [prop getName], [((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(_properties_, i))) getTypePropertyName] } count:2 type:NSObject_class_()]];
      }
      return bean;
    }
    ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__deserializeAndSetWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withId_withInt_withNSString_(self, p, ctxt, bean, i, typeId);
  }
  return bean;
}

- (id)completeWithComFasterxmlJacksonCoreJsonParser:(ComFasterxmlJacksonCoreJsonParser *)p
withComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
withComFasterxmlJacksonDatabindDeserImplPropertyValueBuffer:(ComFasterxmlJacksonDatabindDeserImplPropertyValueBuffer *)buffer
withComFasterxmlJacksonDatabindDeserImplPropertyBasedCreator:(ComFasterxmlJacksonDatabindDeserImplPropertyBasedCreator *)creator {
  jint len = ((IOSObjectArray *) nil_chk(_properties_))->size_;
  IOSObjectArray *values = [IOSObjectArray arrayWithLength:len type:NSObject_class_()];
  for (jint i = 0; i < len; ++i) {
    NSString *typeId = IOSObjectArray_Get(nil_chk(_typeIds_), i);
    ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *extProp = IOSObjectArray_Get(_properties_, i);
    if (typeId == nil) {
      if (IOSObjectArray_Get(nil_chk(_tokens_), i) == nil) {
        continue;
      }
      if (![((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(extProp)) hasDefaultType]) {
        [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) reportInputMismatchWithComFasterxmlJacksonDatabindJavaType:_beanType_ withNSString:@"Missing external type id property '%s'" withNSObjectArray:[IOSObjectArray arrayWithObjects:(id[]){ [extProp getTypePropertyName] } count:1 type:NSObject_class_()]];
      }
      else {
        typeId = [extProp getDefaultTypeId];
      }
    }
    else if (IOSObjectArray_Get(nil_chk(_tokens_), i) == nil) {
      ComFasterxmlJacksonDatabindDeserSettableBeanProperty *prop = [((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(extProp)) getProperty];
      [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) reportInputMismatchWithComFasterxmlJacksonDatabindJavaType:_beanType_ withNSString:@"Missing property '%s' for external type id '%s'" withNSObjectArray:[IOSObjectArray arrayWithObjects:(id[]){ [((ComFasterxmlJacksonDatabindDeserSettableBeanProperty *) nil_chk(prop)) getName], [((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(_properties_, i))) getTypePropertyName] } count:2 type:NSObject_class_()]];
    }
    IOSObjectArray_Set(values, i, ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__deserializeWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withInt_withNSString_(self, p, ctxt, i, typeId));
    ComFasterxmlJacksonDatabindDeserSettableBeanProperty *prop = [((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(extProp)) getProperty];
    if ([((ComFasterxmlJacksonDatabindDeserSettableBeanProperty *) nil_chk(prop)) getCreatorIndex] >= 0) {
      [((ComFasterxmlJacksonDatabindDeserImplPropertyValueBuffer *) nil_chk(buffer)) assignParameterWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:prop withId:IOSObjectArray_Get(values, i)];
      ComFasterxmlJacksonDatabindDeserSettableBeanProperty *typeProp = [extProp getTypeProperty];
      if ((typeProp != nil) && ([((ComFasterxmlJacksonDatabindDeserSettableBeanProperty *) nil_chk(typeProp)) getCreatorIndex] >= 0)) {
        [buffer assignParameterWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:typeProp withId:typeId];
      }
    }
  }
  id bean = [((ComFasterxmlJacksonDatabindDeserImplPropertyBasedCreator *) nil_chk(creator)) buildWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindDeserImplPropertyValueBuffer:buffer];
  for (jint i = 0; i < len; ++i) {
    ComFasterxmlJacksonDatabindDeserSettableBeanProperty *prop = [((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(_properties_, i))) getProperty];
    if ([((ComFasterxmlJacksonDatabindDeserSettableBeanProperty *) nil_chk(prop)) getCreatorIndex] < 0) {
      [prop setWithId:bean withId:IOSObjectArray_Get(values, i)];
    }
  }
  return bean;
}

- (id)_deserializeWithComFasterxmlJacksonCoreJsonParser:(ComFasterxmlJacksonCoreJsonParser *)p
  withComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                withInt:(jint)index
                                           withNSString:(NSString *)typeId {
  return ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__deserializeWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withInt_withNSString_(self, p, ctxt, index, typeId);
}

- (void)_deserializeAndSetWithComFasterxmlJacksonCoreJsonParser:(ComFasterxmlJacksonCoreJsonParser *)p
          withComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                         withId:(id)bean
                                                        withInt:(jint)index
                                                   withNSString:(NSString *)typeId {
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__deserializeAndSetWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withId_withInt_withNSString_(self, p, ctxt, bean, index, typeId);
}

- (void)dealloc {
  RELEASE_(_beanType_);
  RELEASE_(_properties_);
  RELEASE_(_nameToPropertyIndex_);
  RELEASE_(_typeIds_);
  RELEASE_(_tokens_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x4, -1, 0, -1, 1, -1, -1 },
    { NULL, NULL, 0x4, -1, 2, -1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder;", 0x9, 3, 4, -1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindDeserImplExternalTypeHandler;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, 5, 6, 7, -1, -1, -1 },
    { NULL, "Z", 0x12, 8, 9, 7, -1, -1, -1 },
    { NULL, "Z", 0x1, 10, 6, 7, -1, -1, -1 },
    { NULL, "LNSObject;", 0x1, 11, 12, 7, -1, -1, -1 },
    { NULL, "LNSObject;", 0x1, 11, 13, 7, -1, -1, -1 },
    { NULL, "LNSObject;", 0x14, 14, 15, 7, -1, -1, -1 },
    { NULL, "V", 0x14, 16, 17, 7, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithComFasterxmlJacksonDatabindJavaType:withComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedPropertyArray:withJavaUtilMap:withNSStringArray:withComFasterxmlJacksonDatabindUtilTokenBufferArray:);
  methods[1].selector = @selector(initWithComFasterxmlJacksonDatabindDeserImplExternalTypeHandler:);
  methods[2].selector = @selector(builderWithComFasterxmlJacksonDatabindJavaType:);
  methods[3].selector = @selector(start);
  methods[4].selector = @selector(handleTypePropertyValueWithComFasterxmlJacksonCoreJsonParser:withComFasterxmlJacksonDatabindDeserializationContext:withNSString:withId:);
  methods[5].selector = @selector(_handleTypePropertyValueWithComFasterxmlJacksonCoreJsonParser:withComFasterxmlJacksonDatabindDeserializationContext:withNSString:withId:withNSString:withInt:);
  methods[6].selector = @selector(handlePropertyValueWithComFasterxmlJacksonCoreJsonParser:withComFasterxmlJacksonDatabindDeserializationContext:withNSString:withId:);
  methods[7].selector = @selector(completeWithComFasterxmlJacksonCoreJsonParser:withComFasterxmlJacksonDatabindDeserializationContext:withId:);
  methods[8].selector = @selector(completeWithComFasterxmlJacksonCoreJsonParser:withComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindDeserImplPropertyValueBuffer:withComFasterxmlJacksonDatabindDeserImplPropertyBasedCreator:);
  methods[9].selector = @selector(_deserializeWithComFasterxmlJacksonCoreJsonParser:withComFasterxmlJacksonDatabindDeserializationContext:withInt:withNSString:);
  methods[10].selector = @selector(_deserializeAndSetWithComFasterxmlJacksonCoreJsonParser:withComFasterxmlJacksonDatabindDeserializationContext:withId:withInt:withNSString:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "_beanType_", "LComFasterxmlJacksonDatabindJavaType;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "_properties_", "[LComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "_nameToPropertyIndex_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x12, -1, -1, 18, -1 },
    { "_typeIds_", "[LNSString;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "_tokens_", "[LComFasterxmlJacksonDatabindUtilTokenBuffer;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LComFasterxmlJacksonDatabindJavaType;[LComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty;LJavaUtilMap;[LNSString;[LComFasterxmlJacksonDatabindUtilTokenBuffer;", "(Lcom/fasterxml/jackson/databind/JavaType;[Lcom/fasterxml/jackson/databind/deser/impl/ExternalTypeHandler$ExtTypedProperty;Ljava/util/Map<Ljava/lang/String;Ljava/lang/Object;>;[Ljava/lang/String;[Lcom/fasterxml/jackson/databind/util/TokenBuffer;)V", "LComFasterxmlJacksonDatabindDeserImplExternalTypeHandler;", "builder", "LComFasterxmlJacksonDatabindJavaType;", "handleTypePropertyValue", "LComFasterxmlJacksonCoreJsonParser;LComFasterxmlJacksonDatabindDeserializationContext;LNSString;LNSObject;", "LJavaIoIOException;", "_handleTypePropertyValue", "LComFasterxmlJacksonCoreJsonParser;LComFasterxmlJacksonDatabindDeserializationContext;LNSString;LNSObject;LNSString;I", "handlePropertyValue", "complete", "LComFasterxmlJacksonCoreJsonParser;LComFasterxmlJacksonDatabindDeserializationContext;LNSObject;", "LComFasterxmlJacksonCoreJsonParser;LComFasterxmlJacksonDatabindDeserializationContext;LComFasterxmlJacksonDatabindDeserImplPropertyValueBuffer;LComFasterxmlJacksonDatabindDeserImplPropertyBasedCreator;", "_deserialize", "LComFasterxmlJacksonCoreJsonParser;LComFasterxmlJacksonDatabindDeserializationContext;ILNSString;", "_deserializeAndSet", "LComFasterxmlJacksonCoreJsonParser;LComFasterxmlJacksonDatabindDeserializationContext;LNSObject;ILNSString;", "Ljava/util/Map<Ljava/lang/String;Ljava/lang/Object;>;", "LComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder;LComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty;" };
  static const J2ObjcClassInfo _ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler = { "ExternalTypeHandler", "com.fasterxml.jackson.databind.deser.impl", ptrTable, methods, fields, 7, 0x1, 11, 5, -1, 19, -1, -1, -1 };
  return &_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler;
}

@end

void ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initWithComFasterxmlJacksonDatabindJavaType_withComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedPropertyArray_withJavaUtilMap_withNSStringArray_withComFasterxmlJacksonDatabindUtilTokenBufferArray_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *self, ComFasterxmlJacksonDatabindJavaType *beanType, IOSObjectArray *properties, id<JavaUtilMap> nameToPropertyIndex, IOSObjectArray *typeIds, IOSObjectArray *tokens) {
  NSObject_init(self);
  JreStrongAssign(&self->_beanType_, beanType);
  JreStrongAssign(&self->_properties_, properties);
  JreStrongAssign(&self->_nameToPropertyIndex_, nameToPropertyIndex);
  JreStrongAssign(&self->_typeIds_, typeIds);
  JreStrongAssign(&self->_tokens_, tokens);
}

ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *new_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initWithComFasterxmlJacksonDatabindJavaType_withComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedPropertyArray_withJavaUtilMap_withNSStringArray_withComFasterxmlJacksonDatabindUtilTokenBufferArray_(ComFasterxmlJacksonDatabindJavaType *beanType, IOSObjectArray *properties, id<JavaUtilMap> nameToPropertyIndex, IOSObjectArray *typeIds, IOSObjectArray *tokens) {
  J2OBJC_NEW_IMPL(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler, initWithComFasterxmlJacksonDatabindJavaType_withComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedPropertyArray_withJavaUtilMap_withNSStringArray_withComFasterxmlJacksonDatabindUtilTokenBufferArray_, beanType, properties, nameToPropertyIndex, typeIds, tokens)
}

ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *create_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initWithComFasterxmlJacksonDatabindJavaType_withComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedPropertyArray_withJavaUtilMap_withNSStringArray_withComFasterxmlJacksonDatabindUtilTokenBufferArray_(ComFasterxmlJacksonDatabindJavaType *beanType, IOSObjectArray *properties, id<JavaUtilMap> nameToPropertyIndex, IOSObjectArray *typeIds, IOSObjectArray *tokens) {
  J2OBJC_CREATE_IMPL(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler, initWithComFasterxmlJacksonDatabindJavaType_withComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedPropertyArray_withJavaUtilMap_withNSStringArray_withComFasterxmlJacksonDatabindUtilTokenBufferArray_, beanType, properties, nameToPropertyIndex, typeIds, tokens)
}

void ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initWithComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *self, ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *h) {
  NSObject_init(self);
  JreStrongAssign(&self->_beanType_, ((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *) nil_chk(h))->_beanType_);
  JreStrongAssign(&self->_properties_, h->_properties_);
  JreStrongAssign(&self->_nameToPropertyIndex_, h->_nameToPropertyIndex_);
  jint len = ((IOSObjectArray *) nil_chk(self->_properties_))->size_;
  JreStrongAssignAndConsume(&self->_typeIds_, [IOSObjectArray newArrayWithLength:len type:NSString_class_()]);
  JreStrongAssignAndConsume(&self->_tokens_, [IOSObjectArray newArrayWithLength:len type:ComFasterxmlJacksonDatabindUtilTokenBuffer_class_()]);
}

ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *new_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initWithComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *h) {
  J2OBJC_NEW_IMPL(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler, initWithComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_, h)
}

ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *create_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initWithComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *h) {
  J2OBJC_CREATE_IMPL(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler, initWithComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_, h)
}

ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder *ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_builderWithComFasterxmlJacksonDatabindJavaType_(ComFasterxmlJacksonDatabindJavaType *beanType) {
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initialize();
  return create_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder_initWithComFasterxmlJacksonDatabindJavaType_(beanType);
}

jboolean ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__handleTypePropertyValueWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withNSString_withId_withNSString_withInt_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *self, ComFasterxmlJacksonCoreJsonParser *p, ComFasterxmlJacksonDatabindDeserializationContext *ctxt, NSString *propName, id bean, NSString *typeId, jint index) {
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *prop = IOSObjectArray_Get(nil_chk(self->_properties_), index);
  if (![((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(prop)) hasTypePropertyNameWithNSString:propName]) {
    return false;
  }
  jboolean canDeserialize = (bean != nil) && (IOSObjectArray_Get(nil_chk(self->_tokens_), index) != nil);
  if (canDeserialize) {
    ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__deserializeAndSetWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withId_withInt_withNSString_(self, p, ctxt, bean, index, typeId);
    IOSObjectArray_Set(nil_chk(self->_tokens_), index, nil);
  }
  else {
    IOSObjectArray_Set(nil_chk(self->_typeIds_), index, typeId);
  }
  return true;
}

id ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__deserializeWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withInt_withNSString_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *self, ComFasterxmlJacksonCoreJsonParser *p, ComFasterxmlJacksonDatabindDeserializationContext *ctxt, jint index, NSString *typeId) {
  ComFasterxmlJacksonCoreJsonParser *p2 = [((ComFasterxmlJacksonDatabindUtilTokenBuffer *) nil_chk(IOSObjectArray_Get(nil_chk(self->_tokens_), index))) asParserWithComFasterxmlJacksonCoreJsonParser:p];
  ComFasterxmlJacksonCoreJsonToken *t = [((ComFasterxmlJacksonCoreJsonParser *) nil_chk(p2)) nextToken];
  if (t == JreLoadEnum(ComFasterxmlJacksonCoreJsonToken, VALUE_NULL)) {
    return nil;
  }
  ComFasterxmlJacksonDatabindUtilTokenBuffer *merged = create_ComFasterxmlJacksonDatabindUtilTokenBuffer_initWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_(p, ctxt);
  [merged writeStartArray];
  [merged writeStringWithNSString:typeId];
  [merged copyCurrentStructureWithComFasterxmlJacksonCoreJsonParser:p2];
  [merged writeEndArray];
  ComFasterxmlJacksonCoreJsonParser *mp = [merged asParserWithComFasterxmlJacksonCoreJsonParser:p];
  [((ComFasterxmlJacksonCoreJsonParser *) nil_chk(mp)) nextToken];
  return [((ComFasterxmlJacksonDatabindDeserSettableBeanProperty *) nil_chk([((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(nil_chk(self->_properties_), index))) getProperty])) deserializeWithComFasterxmlJacksonCoreJsonParser:mp withComFasterxmlJacksonDatabindDeserializationContext:ctxt];
}

void ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler__deserializeAndSetWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_withId_withInt_withNSString_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *self, ComFasterxmlJacksonCoreJsonParser *p, ComFasterxmlJacksonDatabindDeserializationContext *ctxt, id bean, jint index, NSString *typeId) {
  ComFasterxmlJacksonCoreJsonParser *p2 = [((ComFasterxmlJacksonDatabindUtilTokenBuffer *) nil_chk(IOSObjectArray_Get(nil_chk(self->_tokens_), index))) asParserWithComFasterxmlJacksonCoreJsonParser:p];
  ComFasterxmlJacksonCoreJsonToken *t = [((ComFasterxmlJacksonCoreJsonParser *) nil_chk(p2)) nextToken];
  if (t == JreLoadEnum(ComFasterxmlJacksonCoreJsonToken, VALUE_NULL)) {
    [((ComFasterxmlJacksonDatabindDeserSettableBeanProperty *) nil_chk([((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(nil_chk(self->_properties_), index))) getProperty])) setWithId:bean withId:nil];
    return;
  }
  ComFasterxmlJacksonDatabindUtilTokenBuffer *merged = create_ComFasterxmlJacksonDatabindUtilTokenBuffer_initWithComFasterxmlJacksonCoreJsonParser_withComFasterxmlJacksonDatabindDeserializationContext_(p, ctxt);
  [merged writeStartArray];
  [merged writeStringWithNSString:typeId];
  [merged copyCurrentStructureWithComFasterxmlJacksonCoreJsonParser:p2];
  [merged writeEndArray];
  ComFasterxmlJacksonCoreJsonParser *mp = [merged asParserWithComFasterxmlJacksonCoreJsonParser:p];
  [((ComFasterxmlJacksonCoreJsonParser *) nil_chk(mp)) nextToken];
  [((ComFasterxmlJacksonDatabindDeserSettableBeanProperty *) nil_chk([((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(IOSObjectArray_Get(nil_chk(self->_properties_), index))) getProperty])) deserializeAndSetWithComFasterxmlJacksonCoreJsonParser:mp withComFasterxmlJacksonDatabindDeserializationContext:ctxt withId:bean];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler)

@implementation ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder

- (instancetype __nonnull)initWithComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)t {
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder_initWithComFasterxmlJacksonDatabindJavaType_(self, t);
  return self;
}

- (void)addExternalWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:(ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)property
                    withComFasterxmlJacksonDatabindJsontypeTypeDeserializer:(ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *)typeDeser {
  JavaLangInteger *index = JavaLangInteger_valueOfWithInt_([((id<JavaUtilList>) nil_chk(_properties_)) size]);
  [_properties_ addWithId:create_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty_initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty_withComFasterxmlJacksonDatabindJsontypeTypeDeserializer_(property, typeDeser)];
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder__addPropertyIndexWithNSString_withJavaLangInteger_(self, [((ComFasterxmlJacksonDatabindDeserSettableBeanProperty *) nil_chk(property)) getName], index);
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder__addPropertyIndexWithNSString_withJavaLangInteger_(self, [((ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *) nil_chk(typeDeser)) getPropertyName], index);
}

- (void)_addPropertyIndexWithNSString:(NSString *)name
                  withJavaLangInteger:(JavaLangInteger *)index {
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder__addPropertyIndexWithNSString_withJavaLangInteger_(self, name, index);
}

- (ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler *)buildWithComFasterxmlJacksonDatabindDeserImplBeanPropertyMap:(ComFasterxmlJacksonDatabindDeserImplBeanPropertyMap *)otherProps {
  jint len = [((id<JavaUtilList>) nil_chk(_properties_)) size];
  IOSObjectArray *extProps = [IOSObjectArray arrayWithLength:len type:ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty_class_()];
  for (jint i = 0; i < len; ++i) {
    ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *extProp = [_properties_ getWithInt:i];
    NSString *typePropId = [((ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *) nil_chk(extProp)) getTypePropertyName];
    ComFasterxmlJacksonDatabindDeserSettableBeanProperty *typeProp = [((ComFasterxmlJacksonDatabindDeserImplBeanPropertyMap *) nil_chk(otherProps)) findWithNSString:typePropId];
    if (typeProp != nil) {
      [extProp linkTypePropertyWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:typeProp];
    }
    IOSObjectArray_Set(extProps, i, extProp);
  }
  return create_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_initWithComFasterxmlJacksonDatabindJavaType_withComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedPropertyArray_withJavaUtilMap_withNSStringArray_withComFasterxmlJacksonDatabindUtilTokenBufferArray_(_beanType_, extProps, _nameToPropertyIndex_, nil, nil);
}

- (void)dealloc {
  RELEASE_(_beanType_);
  RELEASE_(_properties_);
  RELEASE_(_nameToPropertyIndex_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x4, -1, 0, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 1, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 3, 4, -1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindDeserImplExternalTypeHandler;", 0x1, 5, 6, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithComFasterxmlJacksonDatabindJavaType:);
  methods[1].selector = @selector(addExternalWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:withComFasterxmlJacksonDatabindJsontypeTypeDeserializer:);
  methods[2].selector = @selector(_addPropertyIndexWithNSString:withJavaLangInteger:);
  methods[3].selector = @selector(buildWithComFasterxmlJacksonDatabindDeserImplBeanPropertyMap:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "_beanType_", "LComFasterxmlJacksonDatabindJavaType;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "_properties_", "LJavaUtilList;", .constantValue.asLong = 0, 0x12, -1, -1, 7, -1 },
    { "_nameToPropertyIndex_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x12, -1, -1, 8, -1 },
  };
  static const void *ptrTable[] = { "LComFasterxmlJacksonDatabindJavaType;", "addExternal", "LComFasterxmlJacksonDatabindDeserSettableBeanProperty;LComFasterxmlJacksonDatabindJsontypeTypeDeserializer;", "_addPropertyIndex", "LNSString;LJavaLangInteger;", "build", "LComFasterxmlJacksonDatabindDeserImplBeanPropertyMap;", "Ljava/util/List<Lcom/fasterxml/jackson/databind/deser/impl/ExternalTypeHandler$ExtTypedProperty;>;", "Ljava/util/Map<Ljava/lang/String;Ljava/lang/Object;>;", "LComFasterxmlJacksonDatabindDeserImplExternalTypeHandler;" };
  static const J2ObjcClassInfo _ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder = { "Builder", "com.fasterxml.jackson.databind.deser.impl", ptrTable, methods, fields, 7, 0x9, 4, 3, 9, -1, -1, -1, -1 };
  return &_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder;
}

@end

void ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder_initWithComFasterxmlJacksonDatabindJavaType_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder *self, ComFasterxmlJacksonDatabindJavaType *t) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->_properties_, new_JavaUtilArrayList_init());
  JreStrongAssignAndConsume(&self->_nameToPropertyIndex_, new_JavaUtilHashMap_init());
  JreStrongAssign(&self->_beanType_, t);
}

ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder *new_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder_initWithComFasterxmlJacksonDatabindJavaType_(ComFasterxmlJacksonDatabindJavaType *t) {
  J2OBJC_NEW_IMPL(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder, initWithComFasterxmlJacksonDatabindJavaType_, t)
}

ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder *create_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder_initWithComFasterxmlJacksonDatabindJavaType_(ComFasterxmlJacksonDatabindJavaType *t) {
  J2OBJC_CREATE_IMPL(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder, initWithComFasterxmlJacksonDatabindJavaType_, t)
}

void ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder__addPropertyIndexWithNSString_withJavaLangInteger_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder *self, NSString *name, JavaLangInteger *index) {
  id ob = [((id<JavaUtilMap>) nil_chk(self->_nameToPropertyIndex_)) getWithId:name];
  if (ob == nil) {
    [self->_nameToPropertyIndex_ putWithId:name withId:index];
  }
  else if ([JavaUtilList_class_() isInstance:ob]) {
    id<JavaUtilList> list = (id<JavaUtilList>) cast_check(ob, JavaUtilList_class_());
    [list addWithId:index];
  }
  else {
    id<JavaUtilList> list = create_JavaUtilLinkedList_init();
    [list addWithId:ob];
    [list addWithId:index];
    [self->_nameToPropertyIndex_ putWithId:name withId:list];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_Builder)

@implementation ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty

- (instancetype __nonnull)initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:(ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)property
                               withComFasterxmlJacksonDatabindJsontypeTypeDeserializer:(ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *)typeDeser {
  ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty_initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty_withComFasterxmlJacksonDatabindJsontypeTypeDeserializer_(self, property, typeDeser);
  return self;
}

- (void)linkTypePropertyWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:(ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)p {
  JreStrongAssign(&_typeProperty_, p);
}

- (jboolean)hasTypePropertyNameWithNSString:(NSString *)n {
  return [((NSString *) nil_chk(n)) isEqual:_typePropertyName_];
}

- (jboolean)hasDefaultType {
  return [((ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *) nil_chk(_typeDeserializer_)) getDefaultImpl] != nil;
}

- (NSString *)getDefaultTypeId {
  IOSClass *defaultType = [((ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *) nil_chk(_typeDeserializer_)) getDefaultImpl];
  if (defaultType == nil) {
    return nil;
  }
  return [((id<ComFasterxmlJacksonDatabindJsontypeTypeIdResolver>) nil_chk([_typeDeserializer_ getTypeIdResolver])) idFromValueAndTypeWithId:nil withIOSClass:defaultType];
}

- (NSString *)getTypePropertyName {
  return _typePropertyName_;
}

- (ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)getProperty {
  return _property_;
}

- (ComFasterxmlJacksonDatabindDeserSettableBeanProperty *)getTypeProperty {
  return _typeProperty_;
}

- (void)dealloc {
  RELEASE_(_property_);
  RELEASE_(_typeDeserializer_);
  RELEASE_(_typePropertyName_);
  RELEASE_(_typeProperty_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 1, 2, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, 3, 4, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindDeserSettableBeanProperty;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindDeserSettableBeanProperty;", 0x1, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:withComFasterxmlJacksonDatabindJsontypeTypeDeserializer:);
  methods[1].selector = @selector(linkTypePropertyWithComFasterxmlJacksonDatabindDeserSettableBeanProperty:);
  methods[2].selector = @selector(hasTypePropertyNameWithNSString:);
  methods[3].selector = @selector(hasDefaultType);
  methods[4].selector = @selector(getDefaultTypeId);
  methods[5].selector = @selector(getTypePropertyName);
  methods[6].selector = @selector(getProperty);
  methods[7].selector = @selector(getTypeProperty);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "_property_", "LComFasterxmlJacksonDatabindDeserSettableBeanProperty;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "_typeDeserializer_", "LComFasterxmlJacksonDatabindJsontypeTypeDeserializer;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "_typePropertyName_", "LNSString;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "_typeProperty_", "LComFasterxmlJacksonDatabindDeserSettableBeanProperty;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LComFasterxmlJacksonDatabindDeserSettableBeanProperty;LComFasterxmlJacksonDatabindJsontypeTypeDeserializer;", "linkTypeProperty", "LComFasterxmlJacksonDatabindDeserSettableBeanProperty;", "hasTypePropertyName", "LNSString;", "LComFasterxmlJacksonDatabindDeserImplExternalTypeHandler;" };
  static const J2ObjcClassInfo _ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty = { "ExtTypedProperty", "com.fasterxml.jackson.databind.deser.impl", ptrTable, methods, fields, 7, 0x1a, 8, 4, 5, -1, -1, -1, -1 };
  return &_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty;
}

@end

void ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty_initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty_withComFasterxmlJacksonDatabindJsontypeTypeDeserializer_(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *self, ComFasterxmlJacksonDatabindDeserSettableBeanProperty *property, ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *typeDeser) {
  NSObject_init(self);
  JreStrongAssign(&self->_property_, property);
  JreStrongAssign(&self->_typeDeserializer_, typeDeser);
  JreStrongAssign(&self->_typePropertyName_, [((ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *) nil_chk(typeDeser)) getPropertyName]);
}

ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *new_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty_initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty_withComFasterxmlJacksonDatabindJsontypeTypeDeserializer_(ComFasterxmlJacksonDatabindDeserSettableBeanProperty *property, ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *typeDeser) {
  J2OBJC_NEW_IMPL(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty, initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty_withComFasterxmlJacksonDatabindJsontypeTypeDeserializer_, property, typeDeser)
}

ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty *create_ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty_initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty_withComFasterxmlJacksonDatabindJsontypeTypeDeserializer_(ComFasterxmlJacksonDatabindDeserSettableBeanProperty *property, ComFasterxmlJacksonDatabindJsontypeTypeDeserializer *typeDeser) {
  J2OBJC_CREATE_IMPL(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty, initWithComFasterxmlJacksonDatabindDeserSettableBeanProperty_withComFasterxmlJacksonDatabindJsontypeTypeDeserializer_, property, typeDeser)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComFasterxmlJacksonDatabindDeserImplExternalTypeHandler_ExtTypedProperty)
