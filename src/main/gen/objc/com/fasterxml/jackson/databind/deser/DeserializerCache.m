//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Salton/Documents/Projects/jackson-databind/src/main/java/com/fasterxml/jackson/databind/deser/DeserializerCache.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/fasterxml/jackson/annotation/JsonFormat.h"
#include "com/fasterxml/jackson/databind/AnnotationIntrospector.h"
#include "com/fasterxml/jackson/databind/BeanDescription.h"
#include "com/fasterxml/jackson/databind/DeserializationConfig.h"
#include "com/fasterxml/jackson/databind/DeserializationContext.h"
#include "com/fasterxml/jackson/databind/JavaType.h"
#include "com/fasterxml/jackson/databind/JsonDeserializer.h"
#include "com/fasterxml/jackson/databind/JsonMappingException.h"
#include "com/fasterxml/jackson/databind/JsonNode.h"
#include "com/fasterxml/jackson/databind/KeyDeserializer.h"
#include "com/fasterxml/jackson/databind/deser/DeserializerCache.h"
#include "com/fasterxml/jackson/databind/deser/DeserializerFactory.h"
#include "com/fasterxml/jackson/databind/deser/ResolvableDeserializer.h"
#include "com/fasterxml/jackson/databind/deser/std/StdDelegatingDeserializer.h"
#include "com/fasterxml/jackson/databind/introspect/Annotated.h"
#include "com/fasterxml/jackson/databind/introspect/AnnotatedClass.h"
#include "com/fasterxml/jackson/databind/type/ArrayType.h"
#include "com/fasterxml/jackson/databind/type/CollectionLikeType.h"
#include "com/fasterxml/jackson/databind/type/CollectionType.h"
#include "com/fasterxml/jackson/databind/type/MapLikeType.h"
#include "com/fasterxml/jackson/databind/type/MapType.h"
#include "com/fasterxml/jackson/databind/type/ReferenceType.h"
#include "com/fasterxml/jackson/databind/type/TypeFactory.h"
#include "com/fasterxml/jackson/databind/util/ClassUtil.h"
#include "com/fasterxml/jackson/databind/util/Converter.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/IllegalStateException.h"
#include "java/util/HashMap.h"
#include "java/util/concurrent/ConcurrentHashMap.h"

@interface ComFasterxmlJacksonDatabindDeserDeserializerCache ()

/*!
 @brief Method called to see if given method has annotations that indicate
  a more specific type than what the argument specifies.
 If annotations are present, they must specify compatible Class;
  instance of which can be assigned using the method. This means
  that the Class has to be raw class of type, or its sub-class
  (or, implementing class if original Class instance is an interface).
 @param a Method or field that the type is associated with
 @param type Type derived from the setter argument
 @return Original type if no annotations are present; or a more
    specific type derived from it if type annotation(s) was found
 @throw JsonMappingExceptionif invalid annotation is found
 */
- (ComFasterxmlJacksonDatabindJavaType *)modifyTypeByAnnotationWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                  withComFasterxmlJacksonDatabindIntrospectAnnotated:(ComFasterxmlJacksonDatabindIntrospectAnnotated *)a
                                                                             withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type;

/*!
 @brief Helper method used to prevent both caching and cache lookups for structured
  types that have custom value handlers
 @since 2.8.11
 */
- (jboolean)_hasCustomHandlersWithComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)t;

- (IOSClass *)_verifyAsClassWithId:(id)src
                      withNSString:(NSString *)methodName
                      withIOSClass:(IOSClass *)noneClass;

@end

inline jlong ComFasterxmlJacksonDatabindDeserDeserializerCache_get_serialVersionUID(void);
#define ComFasterxmlJacksonDatabindDeserDeserializerCache_serialVersionUID 1LL
J2OBJC_STATIC_FIELD_CONSTANT(ComFasterxmlJacksonDatabindDeserDeserializerCache, serialVersionUID, jlong)

__attribute__((unused)) static ComFasterxmlJacksonDatabindJavaType *ComFasterxmlJacksonDatabindDeserDeserializerCache_modifyTypeByAnnotationWithComFasterxmlJacksonDatabindDeserializationContext_withComFasterxmlJacksonDatabindIntrospectAnnotated_withComFasterxmlJacksonDatabindJavaType_(ComFasterxmlJacksonDatabindDeserDeserializerCache *self, ComFasterxmlJacksonDatabindDeserializationContext *ctxt, ComFasterxmlJacksonDatabindIntrospectAnnotated *a, ComFasterxmlJacksonDatabindJavaType *type);

__attribute__((unused)) static jboolean ComFasterxmlJacksonDatabindDeserDeserializerCache__hasCustomHandlersWithComFasterxmlJacksonDatabindJavaType_(ComFasterxmlJacksonDatabindDeserDeserializerCache *self, ComFasterxmlJacksonDatabindJavaType *t);

__attribute__((unused)) static IOSClass *ComFasterxmlJacksonDatabindDeserDeserializerCache__verifyAsClassWithId_withNSString_withIOSClass_(ComFasterxmlJacksonDatabindDeserDeserializerCache *self, id src, NSString *methodName, IOSClass *noneClass);

@implementation ComFasterxmlJacksonDatabindDeserDeserializerCache

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype __nonnull)init {
  ComFasterxmlJacksonDatabindDeserDeserializerCache_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (id)writeReplace {
  [((JavaUtilHashMap *) nil_chk(_incompleteDeserializers_)) clear];
  return self;
}

- (jint)cachedDeserializersCount {
  return [((JavaUtilConcurrentConcurrentHashMap *) nil_chk(_cachedDeserializers_)) size];
}

- (void)flushCachedDeserializers {
  [((JavaUtilConcurrentConcurrentHashMap *) nil_chk(_cachedDeserializers_)) clear];
}

- (ComFasterxmlJacksonDatabindJsonDeserializer *)findValueDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                    withComFasterxmlJacksonDatabindDeserDeserializerFactory:(ComFasterxmlJacksonDatabindDeserDeserializerFactory *)factory
                                                                                    withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)propertyType {
  ComFasterxmlJacksonDatabindJsonDeserializer *deser = [self _findCachedDeserializerWithComFasterxmlJacksonDatabindJavaType:propertyType];
  if (deser == nil) {
    deser = [self _createAndCacheValueDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindDeserDeserializerFactory:factory withComFasterxmlJacksonDatabindJavaType:propertyType];
    if (deser == nil) {
      deser = [self _handleUnknownValueDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindJavaType:propertyType];
    }
  }
  return deser;
}

- (ComFasterxmlJacksonDatabindKeyDeserializer *)findKeyDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                 withComFasterxmlJacksonDatabindDeserDeserializerFactory:(ComFasterxmlJacksonDatabindDeserDeserializerFactory *)factory
                                                                                 withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  ComFasterxmlJacksonDatabindKeyDeserializer *kd = [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createKeyDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindJavaType:type];
  if (kd == nil) {
    return [self _handleUnknownKeyDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindJavaType:type];
  }
  if ([ComFasterxmlJacksonDatabindDeserResolvableDeserializer_class_() isInstance:kd]) {
    [((id<ComFasterxmlJacksonDatabindDeserResolvableDeserializer>) cast_check(kd, ComFasterxmlJacksonDatabindDeserResolvableDeserializer_class_())) resolveWithComFasterxmlJacksonDatabindDeserializationContext:ctxt];
  }
  return kd;
}

- (jboolean)hasValueDeserializerForWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                 withComFasterxmlJacksonDatabindDeserDeserializerFactory:(ComFasterxmlJacksonDatabindDeserDeserializerFactory *)factory
                                                 withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  ComFasterxmlJacksonDatabindJsonDeserializer *deser = [self _findCachedDeserializerWithComFasterxmlJacksonDatabindJavaType:type];
  if (deser == nil) {
    deser = [self _createAndCacheValueDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindDeserDeserializerFactory:factory withComFasterxmlJacksonDatabindJavaType:type];
  }
  return (deser != nil);
}

- (ComFasterxmlJacksonDatabindJsonDeserializer *)_findCachedDeserializerWithComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  if (type == nil) {
    @throw create_JavaLangIllegalArgumentException_initWithNSString_(@"Null JavaType passed");
  }
  if (ComFasterxmlJacksonDatabindDeserDeserializerCache__hasCustomHandlersWithComFasterxmlJacksonDatabindJavaType_(self, type)) {
    return nil;
  }
  return [((JavaUtilConcurrentConcurrentHashMap *) nil_chk(_cachedDeserializers_)) getWithId:type];
}

- (ComFasterxmlJacksonDatabindJsonDeserializer *)_createAndCacheValueDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                               withComFasterxmlJacksonDatabindDeserDeserializerFactory:(ComFasterxmlJacksonDatabindDeserDeserializerFactory *)factory
                                                                                               withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  @synchronized(_incompleteDeserializers_) {
    ComFasterxmlJacksonDatabindJsonDeserializer *deser = [self _findCachedDeserializerWithComFasterxmlJacksonDatabindJavaType:type];
    if (deser != nil) {
      return JreRetainedLocalValue(deser);
    }
    jint count = [((JavaUtilHashMap *) nil_chk(_incompleteDeserializers_)) size];
    if (count > 0) {
      deser = [_incompleteDeserializers_ getWithId:type];
      if (deser != nil) {
        return JreRetainedLocalValue(deser);
      }
    }
    @try {
      return JreRetainedLocalValue([self _createAndCache2WithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindDeserDeserializerFactory:factory withComFasterxmlJacksonDatabindJavaType:type]);
    }
    @finally {
      if (count == 0 && [_incompleteDeserializers_ size] > 0) {
        [_incompleteDeserializers_ clear];
      }
    }
  }
}

- (ComFasterxmlJacksonDatabindJsonDeserializer *)_createAndCache2WithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                               withComFasterxmlJacksonDatabindDeserDeserializerFactory:(ComFasterxmlJacksonDatabindDeserDeserializerFactory *)factory
                                                                               withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  ComFasterxmlJacksonDatabindJsonDeserializer *deser;
  @try {
    deser = [self _createDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindDeserDeserializerFactory:factory withComFasterxmlJacksonDatabindJavaType:type];
  }
  @catch (JavaLangIllegalArgumentException *iae) {
    @throw nil_chk(ComFasterxmlJacksonDatabindJsonMappingException_fromWithComFasterxmlJacksonDatabindDeserializationContext_withNSString_withJavaLangThrowable_(ctxt, [iae getMessage], iae));
  }
  if (deser == nil) {
    return nil;
  }
  jboolean addToCache = !ComFasterxmlJacksonDatabindDeserDeserializerCache__hasCustomHandlersWithComFasterxmlJacksonDatabindJavaType_(self, type) && [deser isCachable];
  if ([ComFasterxmlJacksonDatabindDeserResolvableDeserializer_class_() isInstance:deser]) {
    [((JavaUtilHashMap *) nil_chk(_incompleteDeserializers_)) putWithId:type withId:deser];
    [((id<ComFasterxmlJacksonDatabindDeserResolvableDeserializer>) cast_check(deser, ComFasterxmlJacksonDatabindDeserResolvableDeserializer_class_())) resolveWithComFasterxmlJacksonDatabindDeserializationContext:ctxt];
    [_incompleteDeserializers_ removeWithId:type];
  }
  if (addToCache) {
    [((JavaUtilConcurrentConcurrentHashMap *) nil_chk(_cachedDeserializers_)) putWithId:type withId:deser];
  }
  return deser;
}

- (ComFasterxmlJacksonDatabindJsonDeserializer *)_createDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                  withComFasterxmlJacksonDatabindDeserDeserializerFactory:(ComFasterxmlJacksonDatabindDeserDeserializerFactory *)factory
                                                                                  withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  ComFasterxmlJacksonDatabindDeserializationConfig *config = [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) getConfig];
  if ([((ComFasterxmlJacksonDatabindJavaType *) nil_chk(type)) isAbstract] || [type isMapLikeType] || [type isCollectionLikeType]) {
    type = [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) mapAbstractTypeWithComFasterxmlJacksonDatabindDeserializationConfig:config withComFasterxmlJacksonDatabindJavaType:type];
  }
  ComFasterxmlJacksonDatabindBeanDescription *beanDesc = [((ComFasterxmlJacksonDatabindDeserializationConfig *) nil_chk(config)) introspectWithComFasterxmlJacksonDatabindJavaType:type];
  ComFasterxmlJacksonDatabindJsonDeserializer *deser = [self findDeserializerFromAnnotationWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindIntrospectAnnotated:[((ComFasterxmlJacksonDatabindBeanDescription *) nil_chk(beanDesc)) getClassInfo]];
  if (deser != nil) {
    return deser;
  }
  ComFasterxmlJacksonDatabindJavaType *newType = ComFasterxmlJacksonDatabindDeserDeserializerCache_modifyTypeByAnnotationWithComFasterxmlJacksonDatabindDeserializationContext_withComFasterxmlJacksonDatabindIntrospectAnnotated_withComFasterxmlJacksonDatabindJavaType_(self, ctxt, [beanDesc getClassInfo], type);
  if (newType != type) {
    type = newType;
    beanDesc = [config introspectWithComFasterxmlJacksonDatabindJavaType:newType];
  }
  IOSClass *builder = [((ComFasterxmlJacksonDatabindBeanDescription *) nil_chk(beanDesc)) findPOJOBuilder];
  if (builder != nil) {
    return [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createBuilderBasedDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindJavaType:type withComFasterxmlJacksonDatabindBeanDescription:beanDesc withIOSClass:builder];
  }
  id<ComFasterxmlJacksonDatabindUtilConverter> conv = [beanDesc findDeserializationConverter];
  if (conv == nil) {
    return [self _createDeserializer2WithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindDeserDeserializerFactory:factory withComFasterxmlJacksonDatabindJavaType:type withComFasterxmlJacksonDatabindBeanDescription:beanDesc];
  }
  ComFasterxmlJacksonDatabindJavaType *delegateType = [conv getInputTypeWithComFasterxmlJacksonDatabindTypeTypeFactory:[ctxt getTypeFactory]];
  if (![((ComFasterxmlJacksonDatabindJavaType *) nil_chk(delegateType)) hasRawClassWithIOSClass:[((ComFasterxmlJacksonDatabindJavaType *) nil_chk(type)) getRawClass]]) {
    beanDesc = [config introspectWithComFasterxmlJacksonDatabindJavaType:delegateType];
  }
  return create_ComFasterxmlJacksonDatabindDeserStdStdDelegatingDeserializer_initWithComFasterxmlJacksonDatabindUtilConverter_withComFasterxmlJacksonDatabindJavaType_withComFasterxmlJacksonDatabindJsonDeserializer_(conv, delegateType, [self _createDeserializer2WithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindDeserDeserializerFactory:factory withComFasterxmlJacksonDatabindJavaType:delegateType withComFasterxmlJacksonDatabindBeanDescription:beanDesc]);
}

- (ComFasterxmlJacksonDatabindJsonDeserializer *)_createDeserializer2WithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                   withComFasterxmlJacksonDatabindDeserDeserializerFactory:(ComFasterxmlJacksonDatabindDeserDeserializerFactory *)factory
                                                                                   withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type
                                                                            withComFasterxmlJacksonDatabindBeanDescription:(ComFasterxmlJacksonDatabindBeanDescription *)beanDesc {
  ComFasterxmlJacksonDatabindDeserializationConfig *config = [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) getConfig];
  if ([((ComFasterxmlJacksonDatabindJavaType *) nil_chk(type)) isEnumType]) {
    return [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createEnumDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindJavaType:type withComFasterxmlJacksonDatabindBeanDescription:beanDesc];
  }
  if ([type isContainerType]) {
    if ([type isArrayType]) {
      return [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createArrayDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindTypeArrayType:(ComFasterxmlJacksonDatabindTypeArrayType *) cast_chk(type, [ComFasterxmlJacksonDatabindTypeArrayType class]) withComFasterxmlJacksonDatabindBeanDescription:beanDesc];
    }
    if ([type isMapLikeType]) {
      ComFasterxmlJacksonAnnotationJsonFormat_Value *format = [((ComFasterxmlJacksonDatabindBeanDescription *) nil_chk(beanDesc)) findExpectedFormatWithComFasterxmlJacksonAnnotationJsonFormat_Value:nil];
      if ((format == nil) || [((ComFasterxmlJacksonAnnotationJsonFormat_Value *) nil_chk(format)) getShape] != JreLoadEnum(ComFasterxmlJacksonAnnotationJsonFormat_Shape, OBJECT)) {
        ComFasterxmlJacksonDatabindTypeMapLikeType *mlt = (ComFasterxmlJacksonDatabindTypeMapLikeType *) cast_chk(type, [ComFasterxmlJacksonDatabindTypeMapLikeType class]);
        if ([mlt isTrueMapType]) {
          return [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createMapDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindTypeMapType:(ComFasterxmlJacksonDatabindTypeMapType *) cast_chk(mlt, [ComFasterxmlJacksonDatabindTypeMapType class]) withComFasterxmlJacksonDatabindBeanDescription:beanDesc];
        }
        return [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createMapLikeDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindTypeMapLikeType:mlt withComFasterxmlJacksonDatabindBeanDescription:beanDesc];
      }
    }
    if ([type isCollectionLikeType]) {
      ComFasterxmlJacksonAnnotationJsonFormat_Value *format = [((ComFasterxmlJacksonDatabindBeanDescription *) nil_chk(beanDesc)) findExpectedFormatWithComFasterxmlJacksonAnnotationJsonFormat_Value:nil];
      if ((format == nil) || [((ComFasterxmlJacksonAnnotationJsonFormat_Value *) nil_chk(format)) getShape] != JreLoadEnum(ComFasterxmlJacksonAnnotationJsonFormat_Shape, OBJECT)) {
        ComFasterxmlJacksonDatabindTypeCollectionLikeType *clt = (ComFasterxmlJacksonDatabindTypeCollectionLikeType *) cast_chk(type, [ComFasterxmlJacksonDatabindTypeCollectionLikeType class]);
        if ([clt isTrueCollectionType]) {
          return [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createCollectionDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindTypeCollectionType:(ComFasterxmlJacksonDatabindTypeCollectionType *) cast_chk(clt, [ComFasterxmlJacksonDatabindTypeCollectionType class]) withComFasterxmlJacksonDatabindBeanDescription:beanDesc];
        }
        return [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createCollectionLikeDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindTypeCollectionLikeType:clt withComFasterxmlJacksonDatabindBeanDescription:beanDesc];
      }
    }
  }
  if ([type isReferenceType]) {
    return [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createReferenceDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindTypeReferenceType:(ComFasterxmlJacksonDatabindTypeReferenceType *) cast_chk(type, [ComFasterxmlJacksonDatabindTypeReferenceType class]) withComFasterxmlJacksonDatabindBeanDescription:beanDesc];
  }
  if ([ComFasterxmlJacksonDatabindJsonNode_class_() isAssignableFrom:[type getRawClass]]) {
    return [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createTreeDeserializerWithComFasterxmlJacksonDatabindDeserializationConfig:config withComFasterxmlJacksonDatabindJavaType:type withComFasterxmlJacksonDatabindBeanDescription:beanDesc];
  }
  return [((ComFasterxmlJacksonDatabindDeserDeserializerFactory *) nil_chk(factory)) createBeanDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindJavaType:type withComFasterxmlJacksonDatabindBeanDescription:beanDesc];
}

- (ComFasterxmlJacksonDatabindJsonDeserializer *)findDeserializerFromAnnotationWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                                  withComFasterxmlJacksonDatabindIntrospectAnnotated:(ComFasterxmlJacksonDatabindIntrospectAnnotated *)ann {
  id deserDef = [((ComFasterxmlJacksonDatabindAnnotationIntrospector *) nil_chk([((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) getAnnotationIntrospector])) findDeserializerWithComFasterxmlJacksonDatabindIntrospectAnnotated:ann];
  if (deserDef == nil) {
    return nil;
  }
  ComFasterxmlJacksonDatabindJsonDeserializer *deser = [ctxt deserializerInstanceWithComFasterxmlJacksonDatabindIntrospectAnnotated:ann withId:deserDef];
  return [self findConvertingDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindIntrospectAnnotated:ann withComFasterxmlJacksonDatabindJsonDeserializer:deser];
}

- (ComFasterxmlJacksonDatabindJsonDeserializer *)findConvertingDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                              withComFasterxmlJacksonDatabindIntrospectAnnotated:(ComFasterxmlJacksonDatabindIntrospectAnnotated *)a
                                                                                 withComFasterxmlJacksonDatabindJsonDeserializer:(ComFasterxmlJacksonDatabindJsonDeserializer *)deser {
  id<ComFasterxmlJacksonDatabindUtilConverter> conv = [self findConverterWithComFasterxmlJacksonDatabindDeserializationContext:ctxt withComFasterxmlJacksonDatabindIntrospectAnnotated:a];
  if (conv == nil) {
    return deser;
  }
  ComFasterxmlJacksonDatabindJavaType *delegateType = [conv getInputTypeWithComFasterxmlJacksonDatabindTypeTypeFactory:[((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) getTypeFactory]];
  return create_ComFasterxmlJacksonDatabindDeserStdStdDelegatingDeserializer_initWithComFasterxmlJacksonDatabindUtilConverter_withComFasterxmlJacksonDatabindJavaType_withComFasterxmlJacksonDatabindJsonDeserializer_(conv, delegateType, deser);
}

- (id<ComFasterxmlJacksonDatabindUtilConverter>)findConverterWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                withComFasterxmlJacksonDatabindIntrospectAnnotated:(ComFasterxmlJacksonDatabindIntrospectAnnotated *)a {
  id convDef = [((ComFasterxmlJacksonDatabindAnnotationIntrospector *) nil_chk([((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) getAnnotationIntrospector])) findDeserializationConverterWithComFasterxmlJacksonDatabindIntrospectAnnotated:a];
  if (convDef == nil) {
    return nil;
  }
  return [ctxt converterInstanceWithComFasterxmlJacksonDatabindIntrospectAnnotated:a withId:convDef];
}

- (ComFasterxmlJacksonDatabindJavaType *)modifyTypeByAnnotationWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                  withComFasterxmlJacksonDatabindIntrospectAnnotated:(ComFasterxmlJacksonDatabindIntrospectAnnotated *)a
                                                                             withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  return ComFasterxmlJacksonDatabindDeserDeserializerCache_modifyTypeByAnnotationWithComFasterxmlJacksonDatabindDeserializationContext_withComFasterxmlJacksonDatabindIntrospectAnnotated_withComFasterxmlJacksonDatabindJavaType_(self, ctxt, a, type);
}

- (jboolean)_hasCustomHandlersWithComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)t {
  return ComFasterxmlJacksonDatabindDeserDeserializerCache__hasCustomHandlersWithComFasterxmlJacksonDatabindJavaType_(self, t);
}

- (IOSClass *)_verifyAsClassWithId:(id)src
                      withNSString:(NSString *)methodName
                      withIOSClass:(IOSClass *)noneClass {
  return ComFasterxmlJacksonDatabindDeserDeserializerCache__verifyAsClassWithId_withNSString_withIOSClass_(self, src, methodName, noneClass);
}

- (ComFasterxmlJacksonDatabindJsonDeserializer *)_handleUnknownValueDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                                              withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  IOSClass *rawClass = [((ComFasterxmlJacksonDatabindJavaType *) nil_chk(type)) getRawClass];
  if (!ComFasterxmlJacksonDatabindUtilClassUtil_isConcreteWithIOSClass_(rawClass)) {
    return [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) reportBadDefinitionWithComFasterxmlJacksonDatabindJavaType:type withNSString:JreStrcat("$@", @"Cannot find a Value deserializer for abstract type ", type)];
  }
  return [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) reportBadDefinitionWithComFasterxmlJacksonDatabindJavaType:type withNSString:JreStrcat("$@", @"Cannot find a Value deserializer for type ", type)];
}

- (ComFasterxmlJacksonDatabindKeyDeserializer *)_handleUnknownKeyDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:(ComFasterxmlJacksonDatabindDeserializationContext *)ctxt
                                                                                           withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  return [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) reportBadDefinitionWithComFasterxmlJacksonDatabindJavaType:type withNSString:JreStrcat("$@", @"Cannot find a (Map) Key deserializer for type ", type)];
}

- (void)dealloc {
  RELEASE_(_cachedDeserializers_);
  RELEASE_(_incompleteDeserializers_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSObject;", 0x0, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonDeserializer;", 0x1, 0, 1, 2, 3, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindKeyDeserializer;", 0x1, 4, 1, 2, -1, -1, -1 },
    { NULL, "Z", 0x1, 5, 1, 2, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonDeserializer;", 0x4, 6, 7, -1, 8, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonDeserializer;", 0x4, 9, 1, 2, 3, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonDeserializer;", 0x4, 10, 1, 2, 3, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonDeserializer;", 0x4, 11, 1, 2, 3, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonDeserializer;", 0x4, 12, 13, 2, 14, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonDeserializer;", 0x4, 15, 16, 2, 17, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonDeserializer;", 0x4, 18, 19, 2, 20, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindUtilConverter;", 0x4, 21, 16, 2, 22, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJavaType;", 0x2, 23, 24, 2, -1, -1, -1 },
    { NULL, "Z", 0x2, 25, 7, -1, -1, -1, -1 },
    { NULL, "LIOSClass;", 0x2, 26, 27, -1, 28, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonDeserializer;", 0x4, 29, 30, 2, 31, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindKeyDeserializer;", 0x4, 32, 30, 2, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(writeReplace);
  methods[2].selector = @selector(cachedDeserializersCount);
  methods[3].selector = @selector(flushCachedDeserializers);
  methods[4].selector = @selector(findValueDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindDeserDeserializerFactory:withComFasterxmlJacksonDatabindJavaType:);
  methods[5].selector = @selector(findKeyDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindDeserDeserializerFactory:withComFasterxmlJacksonDatabindJavaType:);
  methods[6].selector = @selector(hasValueDeserializerForWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindDeserDeserializerFactory:withComFasterxmlJacksonDatabindJavaType:);
  methods[7].selector = @selector(_findCachedDeserializerWithComFasterxmlJacksonDatabindJavaType:);
  methods[8].selector = @selector(_createAndCacheValueDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindDeserDeserializerFactory:withComFasterxmlJacksonDatabindJavaType:);
  methods[9].selector = @selector(_createAndCache2WithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindDeserDeserializerFactory:withComFasterxmlJacksonDatabindJavaType:);
  methods[10].selector = @selector(_createDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindDeserDeserializerFactory:withComFasterxmlJacksonDatabindJavaType:);
  methods[11].selector = @selector(_createDeserializer2WithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindDeserDeserializerFactory:withComFasterxmlJacksonDatabindJavaType:withComFasterxmlJacksonDatabindBeanDescription:);
  methods[12].selector = @selector(findDeserializerFromAnnotationWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindIntrospectAnnotated:);
  methods[13].selector = @selector(findConvertingDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindIntrospectAnnotated:withComFasterxmlJacksonDatabindJsonDeserializer:);
  methods[14].selector = @selector(findConverterWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindIntrospectAnnotated:);
  methods[15].selector = @selector(modifyTypeByAnnotationWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindIntrospectAnnotated:withComFasterxmlJacksonDatabindJavaType:);
  methods[16].selector = @selector(_hasCustomHandlersWithComFasterxmlJacksonDatabindJavaType:);
  methods[17].selector = @selector(_verifyAsClassWithId:withNSString:withIOSClass:);
  methods[18].selector = @selector(_handleUnknownValueDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindJavaType:);
  methods[19].selector = @selector(_handleUnknownKeyDeserializerWithComFasterxmlJacksonDatabindDeserializationContext:withComFasterxmlJacksonDatabindJavaType:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID", "J", .constantValue.asLong = ComFasterxmlJacksonDatabindDeserDeserializerCache_serialVersionUID, 0x1a, -1, -1, -1, -1 },
    { "_cachedDeserializers_", "LJavaUtilConcurrentConcurrentHashMap;", .constantValue.asLong = 0, 0x14, -1, -1, 33, -1 },
    { "_incompleteDeserializers_", "LJavaUtilHashMap;", .constantValue.asLong = 0, 0x14, -1, -1, 34, -1 },
  };
  static const void *ptrTable[] = { "findValueDeserializer", "LComFasterxmlJacksonDatabindDeserializationContext;LComFasterxmlJacksonDatabindDeserDeserializerFactory;LComFasterxmlJacksonDatabindJavaType;", "LComFasterxmlJacksonDatabindJsonMappingException;", "(Lcom/fasterxml/jackson/databind/DeserializationContext;Lcom/fasterxml/jackson/databind/deser/DeserializerFactory;Lcom/fasterxml/jackson/databind/JavaType;)Lcom/fasterxml/jackson/databind/JsonDeserializer<Ljava/lang/Object;>;", "findKeyDeserializer", "hasValueDeserializerFor", "_findCachedDeserializer", "LComFasterxmlJacksonDatabindJavaType;", "(Lcom/fasterxml/jackson/databind/JavaType;)Lcom/fasterxml/jackson/databind/JsonDeserializer<Ljava/lang/Object;>;", "_createAndCacheValueDeserializer", "_createAndCache2", "_createDeserializer", "_createDeserializer2", "LComFasterxmlJacksonDatabindDeserializationContext;LComFasterxmlJacksonDatabindDeserDeserializerFactory;LComFasterxmlJacksonDatabindJavaType;LComFasterxmlJacksonDatabindBeanDescription;", "(Lcom/fasterxml/jackson/databind/DeserializationContext;Lcom/fasterxml/jackson/databind/deser/DeserializerFactory;Lcom/fasterxml/jackson/databind/JavaType;Lcom/fasterxml/jackson/databind/BeanDescription;)Lcom/fasterxml/jackson/databind/JsonDeserializer<*>;", "findDeserializerFromAnnotation", "LComFasterxmlJacksonDatabindDeserializationContext;LComFasterxmlJacksonDatabindIntrospectAnnotated;", "(Lcom/fasterxml/jackson/databind/DeserializationContext;Lcom/fasterxml/jackson/databind/introspect/Annotated;)Lcom/fasterxml/jackson/databind/JsonDeserializer<Ljava/lang/Object;>;", "findConvertingDeserializer", "LComFasterxmlJacksonDatabindDeserializationContext;LComFasterxmlJacksonDatabindIntrospectAnnotated;LComFasterxmlJacksonDatabindJsonDeserializer;", "(Lcom/fasterxml/jackson/databind/DeserializationContext;Lcom/fasterxml/jackson/databind/introspect/Annotated;Lcom/fasterxml/jackson/databind/JsonDeserializer<Ljava/lang/Object;>;)Lcom/fasterxml/jackson/databind/JsonDeserializer<Ljava/lang/Object;>;", "findConverter", "(Lcom/fasterxml/jackson/databind/DeserializationContext;Lcom/fasterxml/jackson/databind/introspect/Annotated;)Lcom/fasterxml/jackson/databind/util/Converter<Ljava/lang/Object;Ljava/lang/Object;>;", "modifyTypeByAnnotation", "LComFasterxmlJacksonDatabindDeserializationContext;LComFasterxmlJacksonDatabindIntrospectAnnotated;LComFasterxmlJacksonDatabindJavaType;", "_hasCustomHandlers", "_verifyAsClass", "LNSObject;LNSString;LIOSClass;", "(Ljava/lang/Object;Ljava/lang/String;Ljava/lang/Class<*>;)Ljava/lang/Class<*>;", "_handleUnknownValueDeserializer", "LComFasterxmlJacksonDatabindDeserializationContext;LComFasterxmlJacksonDatabindJavaType;", "(Lcom/fasterxml/jackson/databind/DeserializationContext;Lcom/fasterxml/jackson/databind/JavaType;)Lcom/fasterxml/jackson/databind/JsonDeserializer<Ljava/lang/Object;>;", "_handleUnknownKeyDeserializer", "Ljava/util/concurrent/ConcurrentHashMap<Lcom/fasterxml/jackson/databind/JavaType;Lcom/fasterxml/jackson/databind/JsonDeserializer<Ljava/lang/Object;>;>;", "Ljava/util/HashMap<Lcom/fasterxml/jackson/databind/JavaType;Lcom/fasterxml/jackson/databind/JsonDeserializer<Ljava/lang/Object;>;>;" };
  static const J2ObjcClassInfo _ComFasterxmlJacksonDatabindDeserDeserializerCache = { "DeserializerCache", "com.fasterxml.jackson.databind.deser", ptrTable, methods, fields, 7, 0x11, 20, 3, -1, -1, -1, -1, -1 };
  return &_ComFasterxmlJacksonDatabindDeserDeserializerCache;
}

@end

void ComFasterxmlJacksonDatabindDeserDeserializerCache_init(ComFasterxmlJacksonDatabindDeserDeserializerCache *self) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->_cachedDeserializers_, new_JavaUtilConcurrentConcurrentHashMap_initWithInt_withFloat_withInt_(64, 0.75f, 4));
  JreStrongAssignAndConsume(&self->_incompleteDeserializers_, new_JavaUtilHashMap_initWithInt_(8));
}

ComFasterxmlJacksonDatabindDeserDeserializerCache *new_ComFasterxmlJacksonDatabindDeserDeserializerCache_init() {
  J2OBJC_NEW_IMPL(ComFasterxmlJacksonDatabindDeserDeserializerCache, init)
}

ComFasterxmlJacksonDatabindDeserDeserializerCache *create_ComFasterxmlJacksonDatabindDeserDeserializerCache_init() {
  J2OBJC_CREATE_IMPL(ComFasterxmlJacksonDatabindDeserDeserializerCache, init)
}

ComFasterxmlJacksonDatabindJavaType *ComFasterxmlJacksonDatabindDeserDeserializerCache_modifyTypeByAnnotationWithComFasterxmlJacksonDatabindDeserializationContext_withComFasterxmlJacksonDatabindIntrospectAnnotated_withComFasterxmlJacksonDatabindJavaType_(ComFasterxmlJacksonDatabindDeserDeserializerCache *self, ComFasterxmlJacksonDatabindDeserializationContext *ctxt, ComFasterxmlJacksonDatabindIntrospectAnnotated *a, ComFasterxmlJacksonDatabindJavaType *type) {
  ComFasterxmlJacksonDatabindAnnotationIntrospector *intr = [((ComFasterxmlJacksonDatabindDeserializationContext *) nil_chk(ctxt)) getAnnotationIntrospector];
  if (intr == nil) {
    return type;
  }
  if ([((ComFasterxmlJacksonDatabindJavaType *) nil_chk(type)) isMapLikeType]) {
    ComFasterxmlJacksonDatabindJavaType *keyType = [type getKeyType];
    if (keyType != nil && [keyType getValueHandler] == nil) {
      id kdDef = [intr findKeyDeserializerWithComFasterxmlJacksonDatabindIntrospectAnnotated:a];
      if (kdDef != nil) {
        ComFasterxmlJacksonDatabindKeyDeserializer *kd = [ctxt keyDeserializerInstanceWithComFasterxmlJacksonDatabindIntrospectAnnotated:a withId:kdDef];
        if (kd != nil) {
          type = [((ComFasterxmlJacksonDatabindTypeMapLikeType *) cast_chk(type, [ComFasterxmlJacksonDatabindTypeMapLikeType class])) withKeyValueHandlerWithId:kd];
          keyType = [((ComFasterxmlJacksonDatabindJavaType *) nil_chk(type)) getKeyType];
        }
      }
    }
  }
  ComFasterxmlJacksonDatabindJavaType *contentType = [type getContentType];
  if (contentType != nil) {
    if ([contentType getValueHandler] == nil) {
      id cdDef = [intr findContentDeserializerWithComFasterxmlJacksonDatabindIntrospectAnnotated:a];
      if (cdDef != nil) {
        ComFasterxmlJacksonDatabindJsonDeserializer *cd = nil;
        if ([cdDef isKindOfClass:[ComFasterxmlJacksonDatabindJsonDeserializer class]]) {
          cdDef = (ComFasterxmlJacksonDatabindJsonDeserializer *) cast_chk(cdDef, [ComFasterxmlJacksonDatabindJsonDeserializer class]);
        }
        else {
          IOSClass *cdClass = ComFasterxmlJacksonDatabindDeserDeserializerCache__verifyAsClassWithId_withNSString_withIOSClass_(self, cdDef, @"findContentDeserializer", ComFasterxmlJacksonDatabindJsonDeserializer_None_class_());
          if (cdClass != nil) {
            cd = [ctxt deserializerInstanceWithComFasterxmlJacksonDatabindIntrospectAnnotated:a withId:cdClass];
          }
        }
        if (cd != nil) {
          type = [type withContentValueHandlerWithId:cd];
        }
      }
    }
  }
  type = [intr refineDeserializationTypeWithComFasterxmlJacksonDatabindCfgMapperConfig:[ctxt getConfig] withComFasterxmlJacksonDatabindIntrospectAnnotated:a withComFasterxmlJacksonDatabindJavaType:type];
  return type;
}

jboolean ComFasterxmlJacksonDatabindDeserDeserializerCache__hasCustomHandlersWithComFasterxmlJacksonDatabindJavaType_(ComFasterxmlJacksonDatabindDeserDeserializerCache *self, ComFasterxmlJacksonDatabindJavaType *t) {
  if ([((ComFasterxmlJacksonDatabindJavaType *) nil_chk(t)) isContainerType]) {
    ComFasterxmlJacksonDatabindJavaType *ct = [t getContentType];
    if (ct != nil) {
      if (([ct getValueHandler] != nil) || ([ct getTypeHandler] != nil)) {
        return true;
      }
    }
    if ([t isMapLikeType]) {
      ComFasterxmlJacksonDatabindJavaType *kt = [t getKeyType];
      if ([((ComFasterxmlJacksonDatabindJavaType *) nil_chk(kt)) getValueHandler] != nil) {
        return true;
      }
    }
  }
  return false;
}

IOSClass *ComFasterxmlJacksonDatabindDeserDeserializerCache__verifyAsClassWithId_withNSString_withIOSClass_(ComFasterxmlJacksonDatabindDeserDeserializerCache *self, id src, NSString *methodName, IOSClass *noneClass) {
  if (src == nil) {
    return nil;
  }
  if (!([src isKindOfClass:[IOSClass class]])) {
    @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$$$$$", @"AnnotationIntrospector.", methodName, @"() returned value of type ", [[src java_getClass] getName], @": expected type JsonSerializer or Class<JsonSerializer> instead"));
  }
  IOSClass *cls = (IOSClass *) cast_chk(src, [IOSClass class]);
  if (cls == noneClass || ComFasterxmlJacksonDatabindUtilClassUtil_isBogusClassWithIOSClass_(cls)) {
    return nil;
  }
  return cls;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComFasterxmlJacksonDatabindDeserDeserializerCache)
