//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Salton/Documents/Projects/jackson-databind/src/main/java/com/fasterxml/jackson/databind/SequenceWriter.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "com/fasterxml/jackson/core/JsonGenerator.h"
#include "com/fasterxml/jackson/core/Version.h"
#include "com/fasterxml/jackson/databind/JavaType.h"
#include "com/fasterxml/jackson/databind/JsonSerializer.h"
#include "com/fasterxml/jackson/databind/ObjectWriter.h"
#include "com/fasterxml/jackson/databind/SequenceWriter.h"
#include "com/fasterxml/jackson/databind/SerializationConfig.h"
#include "com/fasterxml/jackson/databind/SerializationFeature.h"
#include "com/fasterxml/jackson/databind/cfg/PackageVersion.h"
#include "com/fasterxml/jackson/databind/jsontype/TypeSerializer.h"
#include "com/fasterxml/jackson/databind/ser/DefaultSerializerProvider.h"
#include "com/fasterxml/jackson/databind/ser/impl/PropertySerializerMap.h"
#include "com/fasterxml/jackson/databind/ser/impl/TypeWrappedSerializer.h"
#include "java/io/Closeable.h"
#include "java/io/IOException.h"
#include "java/lang/Iterable.h"
#include "java/util/Collection.h"

@interface ComFasterxmlJacksonDatabindSequenceWriter ()

- (ComFasterxmlJacksonDatabindJsonSerializer *)_findAndAddDynamicWithIOSClass:(IOSClass *)type;

- (ComFasterxmlJacksonDatabindJsonSerializer *)_findAndAddDynamicWithComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type;

@end

__attribute__((unused)) static ComFasterxmlJacksonDatabindJsonSerializer *ComFasterxmlJacksonDatabindSequenceWriter__findAndAddDynamicWithIOSClass_(ComFasterxmlJacksonDatabindSequenceWriter *self, IOSClass *type);

__attribute__((unused)) static ComFasterxmlJacksonDatabindJsonSerializer *ComFasterxmlJacksonDatabindSequenceWriter__findAndAddDynamicWithComFasterxmlJacksonDatabindJavaType_(ComFasterxmlJacksonDatabindSequenceWriter *self, ComFasterxmlJacksonDatabindJavaType *type);

@implementation ComFasterxmlJacksonDatabindSequenceWriter

- (instancetype __nonnull)initWithComFasterxmlJacksonDatabindSerDefaultSerializerProvider:(ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *)prov
                                                 withComFasterxmlJacksonCoreJsonGenerator:(ComFasterxmlJacksonCoreJsonGenerator *)gen
                                                                              withBoolean:(jboolean)closeGenerator
                                     withComFasterxmlJacksonDatabindObjectWriter_Prefetch:(ComFasterxmlJacksonDatabindObjectWriter_Prefetch *)prefetch {
  ComFasterxmlJacksonDatabindSequenceWriter_initWithComFasterxmlJacksonDatabindSerDefaultSerializerProvider_withComFasterxmlJacksonCoreJsonGenerator_withBoolean_withComFasterxmlJacksonDatabindObjectWriter_Prefetch_(self, prov, gen, closeGenerator, prefetch);
  return self;
}

- (ComFasterxmlJacksonDatabindSequenceWriter *)init__WithBoolean:(jboolean)wrapInArray {
  if (wrapInArray) {
    [((ComFasterxmlJacksonCoreJsonGenerator *) nil_chk(_generator_)) writeStartArray];
    _openArray_ = true;
  }
  return self;
}

- (ComFasterxmlJacksonCoreVersion *)version__ {
  return JreLoadStatic(ComFasterxmlJacksonDatabindCfgPackageVersion, VERSION);
}

- (ComFasterxmlJacksonDatabindSequenceWriter *)writeWithId:(id)value {
  if (value == nil) {
    [((ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *) nil_chk(_provider_)) serializeValueWithComFasterxmlJacksonCoreJsonGenerator:_generator_ withId:nil];
    return self;
  }
  if (_cfgCloseCloseable_ && ([JavaIoCloseable_class_() isInstance:value])) {
    return [self _writeCloseableValueWithId:value];
  }
  ComFasterxmlJacksonDatabindJsonSerializer *ser = _rootSerializer_;
  if (ser == nil) {
    IOSClass *type = [value java_getClass];
    ser = [((ComFasterxmlJacksonDatabindSerImplPropertySerializerMap *) nil_chk(_dynamicSerializers_)) serializerForWithIOSClass:type];
    if (ser == nil) {
      ser = ComFasterxmlJacksonDatabindSequenceWriter__findAndAddDynamicWithIOSClass_(self, type);
    }
  }
  [((ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *) nil_chk(_provider_)) serializeValueWithComFasterxmlJacksonCoreJsonGenerator:_generator_ withId:value withComFasterxmlJacksonDatabindJavaType:nil withComFasterxmlJacksonDatabindJsonSerializer:ser];
  if (_cfgFlush_) {
    [((ComFasterxmlJacksonCoreJsonGenerator *) nil_chk(_generator_)) flush];
  }
  return self;
}

- (ComFasterxmlJacksonDatabindSequenceWriter *)writeWithId:(id)value
                   withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  if (value == nil) {
    [((ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *) nil_chk(_provider_)) serializeValueWithComFasterxmlJacksonCoreJsonGenerator:_generator_ withId:nil];
    return self;
  }
  if (_cfgCloseCloseable_ && ([JavaIoCloseable_class_() isInstance:value])) {
    return [self _writeCloseableValueWithId:value withComFasterxmlJacksonDatabindJavaType:type];
  }
  ComFasterxmlJacksonDatabindJsonSerializer *ser = [((ComFasterxmlJacksonDatabindSerImplPropertySerializerMap *) nil_chk(_dynamicSerializers_)) serializerForWithIOSClass:[((ComFasterxmlJacksonDatabindJavaType *) nil_chk(type)) getRawClass]];
  if (ser == nil) {
    ser = ComFasterxmlJacksonDatabindSequenceWriter__findAndAddDynamicWithComFasterxmlJacksonDatabindJavaType_(self, type);
  }
  [((ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *) nil_chk(_provider_)) serializeValueWithComFasterxmlJacksonCoreJsonGenerator:_generator_ withId:value withComFasterxmlJacksonDatabindJavaType:type withComFasterxmlJacksonDatabindJsonSerializer:ser];
  if (_cfgFlush_) {
    [((ComFasterxmlJacksonCoreJsonGenerator *) nil_chk(_generator_)) flush];
  }
  return self;
}

- (ComFasterxmlJacksonDatabindSequenceWriter *)writeAllWithNSObjectArray:(IOSObjectArray *)value {
  for (jint i = 0, len = ((IOSObjectArray *) nil_chk(value))->size_; i < len; ++i) {
    [self writeWithId:IOSObjectArray_Get(value, i)];
  }
  return self;
}

- (ComFasterxmlJacksonDatabindSequenceWriter *)writeAllWithJavaUtilCollection:(id<JavaUtilCollection>)container {
  for (id __strong value in nil_chk(container)) {
    [self writeWithId:value];
  }
  return self;
}

- (ComFasterxmlJacksonDatabindSequenceWriter *)writeAllWithJavaLangIterable:(id<JavaLangIterable>)iterable {
  for (id __strong value in nil_chk(iterable)) {
    [self writeWithId:value];
  }
  return self;
}

- (void)flush {
  if (!_closed_) {
    [((ComFasterxmlJacksonCoreJsonGenerator *) nil_chk(_generator_)) flush];
  }
}

- (void)close {
  if (!_closed_) {
    _closed_ = true;
    if (_openArray_) {
      _openArray_ = false;
      [((ComFasterxmlJacksonCoreJsonGenerator *) nil_chk(_generator_)) writeEndArray];
    }
    if (_closeGenerator_) {
      [((ComFasterxmlJacksonCoreJsonGenerator *) nil_chk(_generator_)) close];
    }
  }
}

- (ComFasterxmlJacksonDatabindSequenceWriter *)_writeCloseableValueWithId:(id)value {
  id<JavaIoCloseable> toClose = (id<JavaIoCloseable>) cast_check(value, JavaIoCloseable_class_());
  @try {
    ComFasterxmlJacksonDatabindJsonSerializer *ser = _rootSerializer_;
    if (ser == nil) {
      IOSClass *type = [nil_chk(value) java_getClass];
      ser = [((ComFasterxmlJacksonDatabindSerImplPropertySerializerMap *) nil_chk(_dynamicSerializers_)) serializerForWithIOSClass:type];
      if (ser == nil) {
        ser = ComFasterxmlJacksonDatabindSequenceWriter__findAndAddDynamicWithIOSClass_(self, type);
      }
    }
    [((ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *) nil_chk(_provider_)) serializeValueWithComFasterxmlJacksonCoreJsonGenerator:_generator_ withId:value withComFasterxmlJacksonDatabindJavaType:nil withComFasterxmlJacksonDatabindJsonSerializer:ser];
    if (_cfgFlush_) {
      [((ComFasterxmlJacksonCoreJsonGenerator *) nil_chk(_generator_)) flush];
    }
    id<JavaIoCloseable> tmpToClose = toClose;
    toClose = nil;
    [((id<JavaIoCloseable>) nil_chk(tmpToClose)) close];
  }
  @finally {
    if (toClose != nil) {
      @try {
        [toClose close];
      }
      @catch (JavaIoIOException *ioe) {
      }
    }
  }
  return self;
}

- (ComFasterxmlJacksonDatabindSequenceWriter *)_writeCloseableValueWithId:(id)value
                                  withComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  id<JavaIoCloseable> toClose = (id<JavaIoCloseable>) cast_check(value, JavaIoCloseable_class_());
  @try {
    ComFasterxmlJacksonDatabindJsonSerializer *ser = [((ComFasterxmlJacksonDatabindSerImplPropertySerializerMap *) nil_chk(_dynamicSerializers_)) serializerForWithIOSClass:[((ComFasterxmlJacksonDatabindJavaType *) nil_chk(type)) getRawClass]];
    if (ser == nil) {
      ser = ComFasterxmlJacksonDatabindSequenceWriter__findAndAddDynamicWithComFasterxmlJacksonDatabindJavaType_(self, type);
    }
    [((ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *) nil_chk(_provider_)) serializeValueWithComFasterxmlJacksonCoreJsonGenerator:_generator_ withId:value withComFasterxmlJacksonDatabindJavaType:type withComFasterxmlJacksonDatabindJsonSerializer:ser];
    if (_cfgFlush_) {
      [((ComFasterxmlJacksonCoreJsonGenerator *) nil_chk(_generator_)) flush];
    }
    id<JavaIoCloseable> tmpToClose = toClose;
    toClose = nil;
    [((id<JavaIoCloseable>) nil_chk(tmpToClose)) close];
  }
  @finally {
    if (toClose != nil) {
      @try {
        [toClose close];
      }
      @catch (JavaIoIOException *ioe) {
      }
    }
  }
  return self;
}

- (ComFasterxmlJacksonDatabindJsonSerializer *)_findAndAddDynamicWithIOSClass:(IOSClass *)type {
  return ComFasterxmlJacksonDatabindSequenceWriter__findAndAddDynamicWithIOSClass_(self, type);
}

- (ComFasterxmlJacksonDatabindJsonSerializer *)_findAndAddDynamicWithComFasterxmlJacksonDatabindJavaType:(ComFasterxmlJacksonDatabindJavaType *)type {
  return ComFasterxmlJacksonDatabindSequenceWriter__findAndAddDynamicWithComFasterxmlJacksonDatabindJavaType_(self, type);
}

- (void)dealloc {
  RELEASE_(_provider_);
  RELEASE_(_config_);
  RELEASE_(_generator_);
  RELEASE_(_rootSerializer_);
  RELEASE_(_typeSerializer_);
  RELEASE_(_dynamicSerializers_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, 1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindSequenceWriter;", 0x1, 2, 3, 1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonCoreVersion;", 0x1, 4, -1, -1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindSequenceWriter;", 0x1, 5, 6, 1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindSequenceWriter;", 0x1, 5, 7, 1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindSequenceWriter;", 0x1, 8, 9, 1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindSequenceWriter;", 0x1, 8, 10, 1, 11, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindSequenceWriter;", 0x1, 8, 12, 1, 13, -1, -1 },
    { NULL, "V", 0x1, -1, -1, 1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, 1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindSequenceWriter;", 0x4, 14, 6, 1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindSequenceWriter;", 0x4, 14, 7, 1, -1, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonSerializer;", 0x12, 15, 16, 17, 18, -1, -1 },
    { NULL, "LComFasterxmlJacksonDatabindJsonSerializer;", 0x12, 15, 19, 17, 20, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithComFasterxmlJacksonDatabindSerDefaultSerializerProvider:withComFasterxmlJacksonCoreJsonGenerator:withBoolean:withComFasterxmlJacksonDatabindObjectWriter_Prefetch:);
  methods[1].selector = @selector(init__WithBoolean:);
  methods[2].selector = @selector(version__);
  methods[3].selector = @selector(writeWithId:);
  methods[4].selector = @selector(writeWithId:withComFasterxmlJacksonDatabindJavaType:);
  methods[5].selector = @selector(writeAllWithNSObjectArray:);
  methods[6].selector = @selector(writeAllWithJavaUtilCollection:);
  methods[7].selector = @selector(writeAllWithJavaLangIterable:);
  methods[8].selector = @selector(flush);
  methods[9].selector = @selector(close);
  methods[10].selector = @selector(_writeCloseableValueWithId:);
  methods[11].selector = @selector(_writeCloseableValueWithId:withComFasterxmlJacksonDatabindJavaType:);
  methods[12].selector = @selector(_findAndAddDynamicWithIOSClass:);
  methods[13].selector = @selector(_findAndAddDynamicWithComFasterxmlJacksonDatabindJavaType:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "_provider_", "LComFasterxmlJacksonDatabindSerDefaultSerializerProvider;", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "_config_", "LComFasterxmlJacksonDatabindSerializationConfig;", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "_generator_", "LComFasterxmlJacksonCoreJsonGenerator;", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "_rootSerializer_", "LComFasterxmlJacksonDatabindJsonSerializer;", .constantValue.asLong = 0, 0x14, -1, -1, 21, -1 },
    { "_typeSerializer_", "LComFasterxmlJacksonDatabindJsontypeTypeSerializer;", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "_closeGenerator_", "Z", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "_cfgFlush_", "Z", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "_cfgCloseCloseable_", "Z", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "_dynamicSerializers_", "LComFasterxmlJacksonDatabindSerImplPropertySerializerMap;", .constantValue.asLong = 0, 0x4, -1, -1, -1, -1 },
    { "_openArray_", "Z", .constantValue.asLong = 0, 0x4, -1, -1, -1, -1 },
    { "_closed_", "Z", .constantValue.asLong = 0, 0x4, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LComFasterxmlJacksonDatabindSerDefaultSerializerProvider;LComFasterxmlJacksonCoreJsonGenerator;ZLComFasterxmlJacksonDatabindObjectWriter_Prefetch;", "LJavaIoIOException;", "init", "Z", "version", "write", "LNSObject;", "LNSObject;LComFasterxmlJacksonDatabindJavaType;", "writeAll", "[LNSObject;", "LJavaUtilCollection;", "<C::Ljava/util/Collection<*>;>(TC;)Lcom/fasterxml/jackson/databind/SequenceWriter;", "LJavaLangIterable;", "(Ljava/lang/Iterable<*>;)Lcom/fasterxml/jackson/databind/SequenceWriter;", "_writeCloseableValue", "_findAndAddDynamic", "LIOSClass;", "LComFasterxmlJacksonDatabindJsonMappingException;", "(Ljava/lang/Class<*>;)Lcom/fasterxml/jackson/databind/JsonSerializer<Ljava/lang/Object;>;", "LComFasterxmlJacksonDatabindJavaType;", "(Lcom/fasterxml/jackson/databind/JavaType;)Lcom/fasterxml/jackson/databind/JsonSerializer<Ljava/lang/Object;>;", "Lcom/fasterxml/jackson/databind/JsonSerializer<Ljava/lang/Object;>;" };
  static const J2ObjcClassInfo _ComFasterxmlJacksonDatabindSequenceWriter = { "SequenceWriter", "com.fasterxml.jackson.databind", ptrTable, methods, fields, 7, 0x1, 14, 11, -1, -1, -1, -1, -1 };
  return &_ComFasterxmlJacksonDatabindSequenceWriter;
}

@end

void ComFasterxmlJacksonDatabindSequenceWriter_initWithComFasterxmlJacksonDatabindSerDefaultSerializerProvider_withComFasterxmlJacksonCoreJsonGenerator_withBoolean_withComFasterxmlJacksonDatabindObjectWriter_Prefetch_(ComFasterxmlJacksonDatabindSequenceWriter *self, ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *prov, ComFasterxmlJacksonCoreJsonGenerator *gen, jboolean closeGenerator, ComFasterxmlJacksonDatabindObjectWriter_Prefetch *prefetch) {
  NSObject_init(self);
  JreStrongAssign(&self->_provider_, prov);
  JreStrongAssign(&self->_generator_, gen);
  self->_closeGenerator_ = closeGenerator;
  JreStrongAssign(&self->_rootSerializer_, [((ComFasterxmlJacksonDatabindObjectWriter_Prefetch *) nil_chk(prefetch)) getValueSerializer]);
  JreStrongAssign(&self->_typeSerializer_, [prefetch getTypeSerializer]);
  JreStrongAssign(&self->_config_, [((ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *) nil_chk(prov)) getConfig]);
  self->_cfgFlush_ = [((ComFasterxmlJacksonDatabindSerializationConfig *) nil_chk(self->_config_)) isEnabledWithComFasterxmlJacksonDatabindSerializationFeature:JreLoadEnum(ComFasterxmlJacksonDatabindSerializationFeature, FLUSH_AFTER_WRITE_VALUE)];
  self->_cfgCloseCloseable_ = [self->_config_ isEnabledWithComFasterxmlJacksonDatabindSerializationFeature:JreLoadEnum(ComFasterxmlJacksonDatabindSerializationFeature, CLOSE_CLOSEABLE)];
  JreStrongAssign(&self->_dynamicSerializers_, ComFasterxmlJacksonDatabindSerImplPropertySerializerMap_emptyForRootValues());
}

ComFasterxmlJacksonDatabindSequenceWriter *new_ComFasterxmlJacksonDatabindSequenceWriter_initWithComFasterxmlJacksonDatabindSerDefaultSerializerProvider_withComFasterxmlJacksonCoreJsonGenerator_withBoolean_withComFasterxmlJacksonDatabindObjectWriter_Prefetch_(ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *prov, ComFasterxmlJacksonCoreJsonGenerator *gen, jboolean closeGenerator, ComFasterxmlJacksonDatabindObjectWriter_Prefetch *prefetch) {
  J2OBJC_NEW_IMPL(ComFasterxmlJacksonDatabindSequenceWriter, initWithComFasterxmlJacksonDatabindSerDefaultSerializerProvider_withComFasterxmlJacksonCoreJsonGenerator_withBoolean_withComFasterxmlJacksonDatabindObjectWriter_Prefetch_, prov, gen, closeGenerator, prefetch)
}

ComFasterxmlJacksonDatabindSequenceWriter *create_ComFasterxmlJacksonDatabindSequenceWriter_initWithComFasterxmlJacksonDatabindSerDefaultSerializerProvider_withComFasterxmlJacksonCoreJsonGenerator_withBoolean_withComFasterxmlJacksonDatabindObjectWriter_Prefetch_(ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *prov, ComFasterxmlJacksonCoreJsonGenerator *gen, jboolean closeGenerator, ComFasterxmlJacksonDatabindObjectWriter_Prefetch *prefetch) {
  J2OBJC_CREATE_IMPL(ComFasterxmlJacksonDatabindSequenceWriter, initWithComFasterxmlJacksonDatabindSerDefaultSerializerProvider_withComFasterxmlJacksonCoreJsonGenerator_withBoolean_withComFasterxmlJacksonDatabindObjectWriter_Prefetch_, prov, gen, closeGenerator, prefetch)
}

ComFasterxmlJacksonDatabindJsonSerializer *ComFasterxmlJacksonDatabindSequenceWriter__findAndAddDynamicWithIOSClass_(ComFasterxmlJacksonDatabindSequenceWriter *self, IOSClass *type) {
  ComFasterxmlJacksonDatabindSerImplPropertySerializerMap_SerializerAndMapResult *result;
  if (self->_typeSerializer_ == nil) {
    result = [((ComFasterxmlJacksonDatabindSerImplPropertySerializerMap *) nil_chk(self->_dynamicSerializers_)) findAndAddRootValueSerializerWithIOSClass:type withComFasterxmlJacksonDatabindSerializerProvider:self->_provider_];
  }
  else {
    result = [((ComFasterxmlJacksonDatabindSerImplPropertySerializerMap *) nil_chk(self->_dynamicSerializers_)) addSerializerWithIOSClass:type withComFasterxmlJacksonDatabindJsonSerializer:create_ComFasterxmlJacksonDatabindSerImplTypeWrappedSerializer_initWithComFasterxmlJacksonDatabindJsontypeTypeSerializer_withComFasterxmlJacksonDatabindJsonSerializer_(self->_typeSerializer_, [((ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *) nil_chk(self->_provider_)) findValueSerializerWithIOSClass:type withComFasterxmlJacksonDatabindBeanProperty:nil])];
  }
  JreStrongAssign(&self->_dynamicSerializers_, ((ComFasterxmlJacksonDatabindSerImplPropertySerializerMap_SerializerAndMapResult *) nil_chk(result))->map_);
  return result->serializer_;
}

ComFasterxmlJacksonDatabindJsonSerializer *ComFasterxmlJacksonDatabindSequenceWriter__findAndAddDynamicWithComFasterxmlJacksonDatabindJavaType_(ComFasterxmlJacksonDatabindSequenceWriter *self, ComFasterxmlJacksonDatabindJavaType *type) {
  ComFasterxmlJacksonDatabindSerImplPropertySerializerMap_SerializerAndMapResult *result;
  if (self->_typeSerializer_ == nil) {
    result = [((ComFasterxmlJacksonDatabindSerImplPropertySerializerMap *) nil_chk(self->_dynamicSerializers_)) findAndAddRootValueSerializerWithComFasterxmlJacksonDatabindJavaType:type withComFasterxmlJacksonDatabindSerializerProvider:self->_provider_];
  }
  else {
    result = [((ComFasterxmlJacksonDatabindSerImplPropertySerializerMap *) nil_chk(self->_dynamicSerializers_)) addSerializerWithComFasterxmlJacksonDatabindJavaType:type withComFasterxmlJacksonDatabindJsonSerializer:create_ComFasterxmlJacksonDatabindSerImplTypeWrappedSerializer_initWithComFasterxmlJacksonDatabindJsontypeTypeSerializer_withComFasterxmlJacksonDatabindJsonSerializer_(self->_typeSerializer_, [((ComFasterxmlJacksonDatabindSerDefaultSerializerProvider *) nil_chk(self->_provider_)) findValueSerializerWithComFasterxmlJacksonDatabindJavaType:type withComFasterxmlJacksonDatabindBeanProperty:nil])];
  }
  JreStrongAssign(&self->_dynamicSerializers_, ((ComFasterxmlJacksonDatabindSerImplPropertySerializerMap_SerializerAndMapResult *) nil_chk(result))->map_);
  return result->serializer_;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComFasterxmlJacksonDatabindSequenceWriter)
